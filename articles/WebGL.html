<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Interaction in WebGL (updated) • rgl</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="User Interaction in WebGL (updated)">
<meta property="og:description" content="rgl">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgl</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.110.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/rgl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../rglClass/index.html">Javascript</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/WebGL.html">User Interaction in WebGL (updated)</a>
    </li>
    <li>
      <a href="../articles/pkgdown.html">Using RGL in pkgdown web sites</a>
    </li>
    <li>
      <a href="../articles/transparency.html">A Note on Transparency</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dmurdoch/rgl/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="WebGL_files/htmlwidgets-1.5.4.9001/htmlwidgets.js"></script><script src="WebGL_files/rglWebGL-binding-0.110.2/rglWebGL.js"></script><link href="WebGL_files/rglwidgetClass-0.110.2/rgl.css" rel="stylesheet">
<script src="WebGL_files/rglwidgetClass-0.110.2/rglClass.min.js"></script><!--html_preserve--><script type="text/plain" id="rgl-vertex-shader">
#line 2 1
// File 1 is the vertex shader
#ifdef GL_ES
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
#endif

attribute vec3 aPos;
attribute vec4 aCol;
uniform mat4 mvMatrix;
uniform mat4 prMatrix;
varying vec4 vCol;
varying vec4 vPosition;

#ifdef NEEDS_VNORMAL
attribute vec3 aNorm;
uniform mat4 normMatrix;
varying vec4 vNormal;
#endif

#if defined(HAS_TEXTURE) || defined (IS_TEXT)
attribute vec2 aTexcoord;
varying vec2 vTexcoord;
#endif

#ifdef FIXED_SIZE
uniform vec3 textScale;
#endif

#ifdef FIXED_QUADS
attribute vec3 aOfs;
#endif

#ifdef IS_TWOSIDED
#ifdef HAS_NORMALS
varying float normz;
uniform mat4 invPrMatrix;
#else
attribute vec3 aPos1;
attribute vec3 aPos2;
varying float normz;
#endif
#endif // IS_TWOSIDED

#ifdef FAT_LINES
attribute vec3 aNext;
attribute vec2 aPoint;
varying vec2 vPoint;
varying float vLength;
uniform float uAspect;
uniform float uLwd;
#endif


void main(void) {
  
#ifndef IS_BRUSH
#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)
  vPosition = mvMatrix * vec4(aPos, 1.);
#endif
  
#ifndef FIXED_QUADS
  gl_Position = prMatrix * vPosition;
#endif
#endif // !IS_BRUSH
  
#ifdef IS_POINTS
  gl_PointSize = POINTSIZE;
#endif
  
  vCol = aCol;
  
#ifdef NEEDS_VNORMAL
  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));
#endif
  
#ifdef IS_TWOSIDED
#ifdef HAS_NORMALS
  /* normz should be calculated *after* projection */
  normz = (invPrMatrix*vNormal).z;
#else
  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));
  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;
  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));
  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;
  normz = pos1.x*pos2.y - pos1.y*pos2.x;
#endif
#endif // IS_TWOSIDED
  
#ifdef NEEDS_VNORMAL
  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);
#endif
  
#if defined(HAS_TEXTURE) || defined(IS_TEXT)
  vTexcoord = aTexcoord;
#endif
  
#if defined(FIXED_SIZE) && !defined(ROTATING)
  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);
  pos = pos/pos.w;
  gl_Position = pos + vec4(aOfs*textScale, 0.);
#endif
  
#if defined(IS_SPRITES) && !defined(FIXED_SIZE)
  vec4 pos = mvMatrix * vec4(aPos, 1.);
  pos = pos/pos.w + vec4(aOfs,  0.);
  gl_Position = prMatrix*pos;
#endif
  
#ifdef FAT_LINES
  /* This code was inspired by Matt Deslauriers' code in 
   https://mattdesl.svbtle.com/drawing-lines-is-hard */
  vec2 aspectVec = vec2(uAspect, 1.0);
  mat4 projViewModel = prMatrix * mvMatrix;
  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);
  currentProjected = currentProjected/currentProjected.w;
  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);
  vec2 currentScreen = currentProjected.xy * aspectVec;
  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;
  float len = uLwd;
  vec2 dir = vec2(1.0, 0.0);
  vPoint = aPoint;
  vLength = length(nextScreen - currentScreen)/2.0;
  vLength = vLength/(vLength + len);
  if (vLength > 0.0) {
    dir = normalize(nextScreen - currentScreen);
  }
  vec2 normal = vec2(-dir.y, dir.x);
  dir.x /= uAspect;
  normal.x /= uAspect;
  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);
  gl_Position = currentProjected + offset;
#endif
  
#ifdef IS_BRUSH
  gl_Position = vec4(aPos, 1.);
#endif
}
</script><script type="text/plain" id="rgl-fragment-shader">
#line 2 2
// File 2 is the fragment shader
#ifdef GL_ES
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
#endif
varying vec4 vCol; // carries alpha
varying vec4 vPosition;
#if defined(HAS_TEXTURE) || defined (IS_TEXT)
varying vec2 vTexcoord;
uniform sampler2D uSampler;
#endif

#ifdef HAS_FOG
uniform int uFogMode;
uniform vec3 uFogColor;
uniform vec4 uFogParms;
#endif

#if defined(IS_LIT) && !defined(FIXED_QUADS)
varying vec4 vNormal;
#endif

#if NCLIPPLANES > 0
uniform vec4 vClipplane[NCLIPPLANES];
#endif

#if NLIGHTS > 0
uniform mat4 mvMatrix;
#endif

#ifdef IS_LIT
uniform vec3 emission;
uniform float shininess;
#if NLIGHTS > 0
uniform vec3 ambient[NLIGHTS];
uniform vec3 specular[NLIGHTS]; // light*material
uniform vec3 diffuse[NLIGHTS];
uniform vec3 lightDir[NLIGHTS];
uniform bool viewpoint[NLIGHTS];
uniform bool finite[NLIGHTS];
#endif
#endif // IS_LIT

#ifdef IS_TWOSIDED
uniform bool front;
varying float normz;
#endif

#ifdef FAT_LINES
varying vec2 vPoint;
varying float vLength;
#endif

void main(void) {
  vec4 fragColor;
#ifdef FAT_LINES
  vec2 point = vPoint;
  bool neg = point.y < 0.0;
  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :
                 -(point.y - vLength)/(1.0 - vLength);
#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)
  if (neg && length(point) <= 1.0) discard;
#endif
  point.y = min(point.y, 0.0);
  if (length(point) > 1.0) discard;
#endif // FAT_LINES
  
#ifdef ROUND_POINTS
  vec2 coord = gl_PointCoord - vec2(0.5);
  if (length(coord) > 0.5) discard;
#endif
  
#if NCLIPPLANES > 0
  for (int i = 0; i < NCLIPPLANES; i++)
    if (dot(vPosition, vClipplane[i]) < 0.0) discard;
#endif
    
#ifdef FIXED_QUADS
    vec3 n = vec3(0., 0., 1.);
#elif defined(IS_LIT)
    vec3 n = normalize(vNormal.xyz);
#endif
    
#ifdef IS_TWOSIDED
    if ((normz <= 0.) != front) discard;
#endif
    
#ifdef IS_LIT
    vec3 eye = normalize(-vPosition.xyz/vPosition.w);
    vec3 lightdir;
    vec4 colDiff;
    vec3 halfVec;
    vec4 lighteffect = vec4(emission, 0.);
    vec3 col;
    float nDotL;
#ifdef FIXED_QUADS
    n = -faceforward(n, n, eye);
#endif
    
#if NLIGHTS > 0
    for (int i=0;i<NLIGHTS;i++) {
      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);
      lightdir = lightDir[i];
      if (!viewpoint[i])
        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;
      if (!finite[i]) {
        halfVec = normalize(lightdir + eye);
      } else {
        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);
        halfVec = normalize(lightdir + eye);
      }
      col = ambient[i];
      nDotL = dot(n, lightdir);
      col = col + max(nDotL, 0.) * colDiff.rgb;
      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];
      lighteffect = lighteffect + vec4(col, colDiff.a);
    }
#endif
    
#else // not IS_LIT
    vec4 colDiff = vCol;
    vec4 lighteffect = colDiff;
#endif
    
#ifdef IS_TEXT
    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
#endif
    
#ifdef HAS_TEXTURE
#ifdef TEXTURE_rgb
    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);
#endif
    
#ifdef TEXTURE_rgba
    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);
#endif
    
#ifdef TEXTURE_alpha
    vec4 textureColor = texture2D(uSampler, vTexcoord);
    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;
    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);
#endif
    
#ifdef TEXTURE_luminance
    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);
#endif
    
#ifdef TEXTURE_luminance_alpha
    vec4 textureColor = texture2D(uSampler, vTexcoord);
    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;
    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);
#endif
    
    fragColor = textureColor;

#elif defined(IS_TEXT)
    if (textureColor.a < 0.1)
      discard;
    else
      fragColor = textureColor;
#else
    fragColor = lighteffect;
#endif // HAS_TEXTURE
    
#ifdef HAS_FOG
    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))
    // In Exp and Exp2: use density = density/far
    // fogF will be the proportion of fog
    // Initialize it to the linear value
    float fogF;
    if (uFogMode > 0) {
      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);
      if (uFogMode > 1)
        fogF = mix(uFogParms.w, 1.0, fogF);
      fogF = fogF*uFogParms.z;
      if (uFogMode == 2)
        fogF = 1.0 - exp(-fogF);
      // Docs are wrong: use (density*c)^2, not density*c^2
      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58
      else if (uFogMode == 3)
        fogF = 1.0 - exp(-fogF*fogF);
      fogF = clamp(fogF, 0.0, 1.0);
      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);
    } else gl_FragColor = fragColor;
#else
    gl_FragColor = fragColor;
#endif // HAS_FOG
    
}
</script><!--/html_preserve--><script src="WebGL_files/CanvasMatrix4-0.110.2/CanvasMatrix.min.js"></script><script src="WebGL_files/rglPlayer-binding-0.110.2/rglPlayer.js"></script><link href="WebGL_files/combineWidgetStyle-0.1/combineWidgets.css" rel="stylesheet">
<script src="WebGL_files/combineWidgets-binding-0.11.1/combineWidgets.js"></script><link href="WebGL_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="WebGL_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>User Interaction in WebGL (updated)</h1>
                        <h4 data-toc-skip class="author">Duncan
Murdoch</h4>
            
            <h4 data-toc-skip class="date">December 13, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dmurdoch/rgl/blob/HEAD/vignettes/WebGL.Rmd" class="external-link"><code>vignettes/WebGL.Rmd</code></a></small>
      <div class="hidden name"><code>WebGL.Rmd</code></div>

    </div>

    
    
<style>
    .nostripes tr.even {background-color: white;}
    table {border-style: none;}
    table th {border-style: none;}
    table td {border-style: none;}
    a[href^=".."] {text-decoration: underline;}
    </style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document describes how to embed <code>rgl</code> scenes in HTML
documents and use embedded Javascript to control a WebGL display in an
HTML document. For more general information about <code>rgl</code>, see
<a href="rgl.html">rgl Overview</a>.</p>
<p>We assume that the HTML document is produced from R markdown source
using <code>knitr</code> or <code>rmarkdown</code>. This format mixes
text with Markdown markup with chunks of R code. There is a limited
amount of discussion of other methods.</p>
<p>There are two ways to embed an <code>rgl</code> scene in the
document. The newest one is recommended: call
<a href="#setupKnitr"><code>setupKnitr</code></a> with argument
<code>autoprint = TRUE</code> early in the document. This will set
things up to be quite similar to the way standard 2D graphics are
included by <code>knitr</code>, i.e. it will detect the fact that you’ve
drawn something, and just include it automatically.</p>
<p>If <code>autoprint = FALSE</code> is used or no call is made to
<code><a href="../reference/setupKnitr.html">setupKnitr()</a></code>, an explicit call to
<a href="#rglwidget"><code>rglwidget</code></a> will produce a “widget”
which can be embedded into your document by printing it. This document
uses that method.</p>
<p>Older methods (e.g. <code>writeWebGL</code> or various hooks) that
were used before <code>rgl</code> version 0.102.0 are no longer
supported.</p>
</div>
<div class="section level2">
<h2 id="browser-support">Browser support<a class="anchor" aria-label="anchor" href="#browser-support"></a>
</h2>
<p>Most browsers now support WebGL, but in some browsers it may be
disabled by default. See <a href="https://get.webgl.org" class="external-link uri">https://get.webgl.org</a> for help on a number of different
browsers.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>We start with a simple plot of the iris data. We insert a code chunk
and call the <a href="#rglwidget"><code>rglwidget</code></a> function
with optional argument <code>elementId</code>. This allows later
Javascript code to refer to the image. We also save the object ids from
the plot, so that they can be manipulated later. (The first example in
<a href="#controls">Controls</a> uses tags instead of saving the
ids.)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmurdoch/rgl" class="external-link">rgl</a></span><span class="op">)</span></span>
<span><span class="va">plotids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fu"><a href="../reference/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>                  type<span class="op">=</span><span class="st">"s"</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span>elementId <span class="op">=</span> <span class="st">"plot3drgl"</span><span class="op">)</span></span></code></pre></div>
<div id="plot3drgl" style="width:480px;height:296.662546353523px;" class="rglWebGL html-widget "></div>
<script type="application/json" data-for="plot3drgl">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"13":{"id":13,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[0.21120685338974]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"15":{"id":15,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["Sepal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"16":{"id":16,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["Sepal.Width"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"17":{"id":17,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["Petal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"14","centers":"15","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"14":{"id":14,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"16","colors":"17","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6936740875244],"modelMatrix":[[1.17336976528168,0,0,-7.15755558013916],[0,0.601971924304962,0.672778904438019,-4.5837869644165],[0,-1.65390419960022,0.244871512055397,-15.3684234619141],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370372772217,-70.9934234619141],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17336976528168,1.76004803180695,0.715956389904022],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.11999988555908,8.07999992370605,1.87999939918518,4.52000093460083,0.705000400543213,7.19499969482422],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,14,13,15,16,17,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":150,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":17,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":1800,"byteOffset":0},{"buffer":0,"byteLength":600,"byteOffset":1800},{"buffer":0,"byteLength":1800,"byteOffset":2400},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3MTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZm\nZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/AACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/\nzcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAA\nQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/zcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/\nZma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZm\nZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/AACgQAAAQEDNzMw/AACgQJqZWUDNzMw/\nZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3MTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZ\nWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/zcycQGZmRkAAAMA/AACgQM3MTECamZk/\nAACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAAQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAA\nYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/AACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/\nmpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3MTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMz\nU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBAzczcQGZmRkDNzJxAAACwQDMzE0AAAIBA\nAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMzU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZ\nOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBAzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBA\nMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZmRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3M\nLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlAzcy8QM3MTECamZlAMzPDQDMzM0AAAIBA\nmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMz\nM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBAZma2QGZmJkAAAGBAAACwQJqZGUAzM3NA\nAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3MLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZ\nWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxAMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBA\nAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZmJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3M\nLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZAZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBA\nZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3MLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZ\nOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NAzcycQAAAIEAAAJBAmpnpQJqZOUCamclA\nZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3MTEAzM6NAzczMQM3MLECamalAmpnZQAAA\nQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NAzczMQM3MTECamalAAADQQAAAQEAAALBA\nZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3MDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMz\nM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxAZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBA\nZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMzM0AzM7NAZmbmQAAAQECamblAzczsQDMz\nM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NAmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NA\nZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZmRkAAALBAAADAQAAAQECamZlAzczcQGZm\nRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NAmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxA\nZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAAIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZ\nWUDNzKxAzcy8QAAAQEAzM6NAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP/fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3M\nTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZmZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/\nAACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/zcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZ\nWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAAQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/\nzcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/Zma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZ\nWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZmZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/\nAACgQAAAQEDNzMw/AACgQJqZWUDNzMw/ZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3M\nTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/\nzcycQGZmRkAAAMA/AACgQM3MTECamZk/AACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAA\nQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAAYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/\nAACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/mpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3M\nTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMzU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBA\nzczcQGZmRkDNzJxAAACwQDMzE0AAAIBAAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMz\nU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBA\nzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBAMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZm\nRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3MLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlA\nzcy8QM3MTECamZlAMzPDQDMzM0AAAIBAmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZ\nOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMzM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBA\nZma2QGZmJkAAAGBAAACwQJqZGUAzM3NAAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3M\nLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxA\nMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBAAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZm\nJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3MLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZA\nZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBAZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script><p>Next we insert a button to toggle the display of the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>sceneId <span class="op">=</span> <span class="st">"plot3drgl"</span>, ids <span class="op">=</span> <span class="va">plotids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span>, label <span class="op">=</span> <span class="st">"Data"</span><span class="op">)</span></span></code></pre></div>
<div id="rgl-play24773" style="width:480px;height:40px;" class="rglPlayer html-widget "></div>
<script type="application/json" data-for="rgl-play24773">{"x":{"actions":[{"type":"subsetSetter","value":0,"subsets":[13,[]],"subscenes":null,"fullset":13,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"Data","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"plot3drgl","respondTo":null},"evals":[],"jsHooks":[]}</script><p>The <code>sceneId</code> is the same as the <code>elementId</code> we
used in <code><a href="../reference/rglwidget.html">rglwidget()</a></code>, the <code>ids</code> are the object
ids of the objects that we’d like to toggle, and the <code>label</code>
is the label shown on the button. To find the names in the
<code>plotids</code> variable, apply <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> or
<code><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">plotids</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "data" "axes" "xlab" "ylab" "zlab"</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">plotids</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## data axes xlab ylab zlab </span></span>
<span><span class="co">##   13   14   15   16   17</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="using-magrittr-or-base-pipes">Using <code>magrittr</code> or base pipes<a class="anchor" aria-label="anchor" href="#using-magrittr-or-base-pipes"></a>
</h2>
<p>It can be error-prone to set the <code>elementId</code> in the
<code><a href="../reference/rglwidget.html">rglwidget()</a></code> to match the <code>sceneId</code> in the
<code><a href="../reference/toggleWidget.html">toggleWidget()</a></code> (or <code><a href="../reference/playwidget.html">playwidget()</a></code>, described
below). In the usual case where both are intended to appear together, <a href="https://CRAN.R-project.org/package=magrittr" class="external-link"><code>magrittr</code></a>-style
pipes can be used quite flexibly: the first argument of the control
widget accepts the result of <code><a href="../reference/rglwidget.html">rglwidget()</a></code> (or other control
widgets), and the <code>controllers</code> argument of
<code><a href="../reference/rglwidget.html">rglwidget()</a></code> accepts control widgets. In R 4.1.0, the new
base pipe operator <code>|&gt;</code> should be usable in the same
way.</p>
<p>For example,</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="va">plotids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span>, label <span class="op">=</span> <span class="st">"Data"</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9eceb20dc2a931752ae4" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-9eceb20dc2a931752ae4">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"13":{"id":13,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[0.21120685338974]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"15":{"id":15,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["Sepal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"16":{"id":16,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["Sepal.Width"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"17":{"id":17,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["Petal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"14","centers":"15","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"14":{"id":14,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"16","colors":"17","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6936740875244],"modelMatrix":[[1.17336976528168,0,0,-7.15755558013916],[0,0.601971924304962,0.672778904438019,-4.5837869644165],[0,-1.65390419960022,0.244871512055397,-15.3684234619141],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370372772217,-70.9934234619141],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17336976528168,1.76004803180695,0.715956389904022],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.11999988555908,8.07999992370605,1.87999939918518,4.52000093460083,0.705000400543213,7.19499969482422],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,14,13,15,16,17,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":150,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":17,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":1800,"byteOffset":0},{"buffer":0,"byteLength":600,"byteOffset":1800},{"buffer":0,"byteLength":1800,"byteOffset":2400},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3MTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZm\nZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/AACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/\nzcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAA\nQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/zcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/\nZma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZm\nZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/AACgQAAAQEDNzMw/AACgQJqZWUDNzMw/\nZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3MTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZ\nWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/zcycQGZmRkAAAMA/AACgQM3MTECamZk/\nAACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAAQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAA\nYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/AACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/\nmpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3MTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMz\nU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBAzczcQGZmRkDNzJxAAACwQDMzE0AAAIBA\nAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMzU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZ\nOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBAzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBA\nMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZmRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3M\nLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlAzcy8QM3MTECamZlAMzPDQDMzM0AAAIBA\nmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMz\nM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBAZma2QGZmJkAAAGBAAACwQJqZGUAzM3NA\nAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3MLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZ\nWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxAMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBA\nAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZmJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3M\nLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZAZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBA\nZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3MLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZ\nOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NAzcycQAAAIEAAAJBAmpnpQJqZOUCamclA\nZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3MTEAzM6NAzczMQM3MLECamalAmpnZQAAA\nQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NAzczMQM3MTECamalAAADQQAAAQEAAALBA\nZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3MDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMz\nM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxAZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBA\nZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMzM0AzM7NAZmbmQAAAQECamblAzczsQDMz\nM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NAmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NA\nZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZmRkAAALBAAADAQAAAQECamZlAzczcQGZm\nRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NAmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxA\nZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAAIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZ\nWUDNzKxAzcy8QAAAQEAzM6NAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP/fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3M\nTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZmZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/\nAACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/zcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZ\nWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAAQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/\nzcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/Zma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZ\nWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZmZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/\nAACgQAAAQEDNzMw/AACgQJqZWUDNzMw/ZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3M\nTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/\nzcycQGZmRkAAAMA/AACgQM3MTECamZk/AACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAA\nQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAAYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/\nAACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/mpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3M\nTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMzU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBA\nzczcQGZmRkDNzJxAAACwQDMzE0AAAIBAAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMz\nU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBA\nzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBAMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZm\nRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3MLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlA\nzcy8QM3MTECamZlAMzPDQDMzM0AAAIBAmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZ\nOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMzM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBA\nZma2QGZmJkAAAGBAAACwQJqZGUAzM3NAAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3M\nLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxA\nMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBAAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZm\nJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3MLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZA\nZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBAZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play92222","webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[13,[]],"subscenes":null,"fullset":13,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"Data","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl38977","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play92222","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play92222\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl38977","widget287577520"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl38977\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget287577520\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>If you have R 4.1.0 or greater, this should do the same:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="va">plotids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span>, label <span class="op">=</span> <span class="st">"Data"</span><span class="op">)</span></span></code></pre></div>
<p>You can swap the order of button and scene; use the
<code>magrittr</code> dot (or the <code>=&gt;</code> syntax in base
pipes) to pass the <code>toggleWidget</code> to <code>rglwidget</code>
in the <code>controllers</code> argument:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span><span class="cn">NA</span>, ids <span class="op">=</span> <span class="va">plotids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span>, label <span class="op">=</span> <span class="st">"Data"</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span>controllers <span class="op">=</span> <span class="va">.</span><span class="op">)</span> </span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f30d7598595affc4f25a" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-f30d7598595affc4f25a">{"x":{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[13,[]],"subscenes":null,"fullset":13,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"Data","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl66029","respondTo":null},{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"13":{"id":13,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[0.21120685338974]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"15":{"id":15,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["Sepal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"16":{"id":16,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["Sepal.Width"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"17":{"id":17,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["Petal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"14","centers":"15","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"14":{"id":14,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"16","colors":"17","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6936740875244],"modelMatrix":[[1.17336976528168,0,0,-7.15755558013916],[0,0.601971924304962,0.672778904438019,-4.5837869644165],[0,-1.65390419960022,0.244871512055397,-15.3684234619141],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370372772217,-70.9934234619141],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17336976528168,1.76004803180695,0.715956389904022],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.11999988555908,8.07999992370605,1.87999939918518,4.52000093460083,0.705000400543213,7.19499969482422],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,14,13,15,16,17,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":150,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":17,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":1800,"byteOffset":0},{"buffer":0,"byteLength":600,"byteOffset":1800},{"buffer":0,"byteLength":1800,"byteOffset":2400},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3MTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZm\nZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/AACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/\nzcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAA\nQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/zcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/\nZma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZm\nZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/AACgQAAAQEDNzMw/AACgQJqZWUDNzMw/\nZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3MTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZ\nWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/zcycQGZmRkAAAMA/AACgQM3MTECamZk/\nAACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAAQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAA\nYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/AACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/\nmpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3MTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMz\nU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBAzczcQGZmRkDNzJxAAACwQDMzE0AAAIBA\nAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMzU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZ\nOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBAzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBA\nMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZmRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3M\nLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlAzcy8QM3MTECamZlAMzPDQDMzM0AAAIBA\nmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMz\nM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBAZma2QGZmJkAAAGBAAACwQJqZGUAzM3NA\nAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3MLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZ\nWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxAMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBA\nAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZmJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3M\nLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZAZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBA\nZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3MLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZ\nOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NAzcycQAAAIEAAAJBAmpnpQJqZOUCamclA\nZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3MTEAzM6NAzczMQM3MLECamalAmpnZQAAA\nQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NAzczMQM3MTECamalAAADQQAAAQEAAALBA\nZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3MDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMz\nM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxAZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBA\nZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMzM0AzM7NAZmbmQAAAQECamblAzczsQDMz\nM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NAmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NA\nZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZmRkAAALBAAADAQAAAQECamZlAzczcQGZm\nRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NAmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxA\nZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAAIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZ\nWUDNzKxAzcy8QAAAQEAzM6NAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP/fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3M\nTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZmZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/\nAACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/zcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZ\nWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAAQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/\nzcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/Zma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZ\nWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZmZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/\nAACgQAAAQEDNzMw/AACgQJqZWUDNzMw/ZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3M\nTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/\nzcycQGZmRkAAAMA/AACgQM3MTECamZk/AACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAA\nQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAAYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/\nAACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/mpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3M\nTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMzU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBA\nzczcQGZmRkDNzJxAAACwQDMzE0AAAIBAAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMz\nU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBA\nzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBAMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZm\nRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3MLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlA\nzcy8QM3MTECamZlAMzPDQDMzM0AAAIBAmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZ\nOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMzM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBA\nZma2QGZmJkAAAGBAAACwQJqZGUAzM3NAAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3M\nLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxA\nMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBAAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZm\nJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3MLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZA\nZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBAZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play28321","webGLoptions":{"preserveDrawingBuffer":true}}],"widgetType":["rglPlayer","rglWebGL"],"elementId":["rgl-play28321","rgl66029"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play28321\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl66029\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>or using R 4.1.0 or later,</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toggleWidget</span>(<span class="cn">NA</span>, <span class="at">ids =</span> plotids[<span class="st">"data"</span>], <span class="at">label =</span> <span class="st">"Data"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  w <span class="sc">=&gt;</span> <span class="fu">rglwidget</span>(<span class="at">controllers =</span> w) </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="controls">Controls<a class="anchor" aria-label="anchor" href="#controls"></a>
</h2>
<p>We have seen how to change the contents of the plot using
<a name="toggleWidget"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/toggleWidget.html"><code>toggleWidget</code></a>.
We can do more elaborate displays. For example, we can redo the previous
plot, but with the three species as separate “spheres” objects and
buttons to toggle them:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/scene.html">clear3d</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Remove the earlier display</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"setosa"</span><span class="op">)</span>, </span>
<span>     <span class="fu"><a href="../reference/spheres.html">spheres3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>                  col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span>,</span>
<span>                  radius <span class="op">=</span> <span class="fl">0.211</span>,</span>
<span>                  tag <span class="op">=</span> <span class="st">"setosa"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"versicolor"</span><span class="op">)</span>, </span>
<span>     <span class="fu"><a href="../reference/spheres.html">spheres3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>               col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span>,</span>
<span>               radius <span class="op">=</span> <span class="fl">0.211</span>, </span>
<span>               tag <span class="op">=</span> <span class="st">"versicolor"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"virginica"</span><span class="op">)</span>, </span>
<span>     <span class="fu"><a href="../reference/spheres.html">spheres3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>               col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span>,</span>
<span>               radius <span class="op">=</span> <span class="fl">0.211</span>,</span>
<span>               tag <span class="op">=</span> <span class="st">"virginica"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/aspect3d.html">aspect3d</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/decorate3d.html">decorate3d</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"axes"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"setosa"</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"versicolor"</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"virginica"</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/toggleWidget.html">toggleWidget</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"axes"</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span> </span>
<span><span class="fu"><a href="../reference/asRow.html">asRow</a></span><span class="op">(</span>last <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b85bf888dc62471906a9" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-b85bf888dc62471906a9">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"36":{"id":36,"type":"spheres","material":{"tag":"setosa"},"vertices":"0","colors":"1","radii":[[0.210999995470047]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"37":{"id":37,"type":"spheres","material":{"tag":"versicolor"},"vertices":"3","colors":"4","radii":[[0.210999995470047]],"centers":"5","ignoreExtent":false,"fastTransparency":true,"flags":32771},"38":{"id":38,"type":"spheres","material":{"tag":"virginica"},"vertices":"6","colors":"7","radii":[[0.210999995470047]],"centers":"8","ignoreExtent":false,"fastTransparency":true,"flags":32771},"40":{"id":40,"type":"text","material":{"lit":false,"margin":0,"floating":true,"tag":"axes","edge":[0,1,1]},"vertices":"9","colors":"10","texts":[["x"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"41":{"id":41,"type":"text","material":{"lit":false,"margin":1,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"12","colors":"13","texts":[["y"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"14","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"42":{"id":42,"type":"text","material":{"lit":false,"margin":2,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"15","colors":"16","texts":[["z"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"17","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"18","centers":"19","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"20","centers":"21","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"39":{"id":39,"type":"bboxdeco","material":{"front":"lines","back":"lines","tag":"axes"},"vertices":"22","colors":"23","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6919536590576],"modelMatrix":[[1.17337143421173,0,0,-7.15756559371948],[0,0.601974964141846,0.672778010368347,-4.58379364013672],[0,-1.65391254425049,0.244871184229851,-15.3666744232178],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-70.9872207641602],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337143421173,1.76005697250366,0.715955436229706],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.12017631530762,8.07982349395752,1.88011753559113,4.5198826789856,0.705288887023926,7.19471120834351],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,39,36,37,38,40,41,42,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":5,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":8,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":18,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":19,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":20,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":21,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":22,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":23,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":600,"byteOffset":0},{"buffer":0,"byteLength":200,"byteOffset":600},{"buffer":0,"byteLength":600,"byteOffset":800},{"buffer":0,"byteLength":600,"byteOffset":1400},{"buffer":0,"byteLength":200,"byteOffset":2000},{"buffer":0,"byteLength":600,"byteOffset":2200},{"buffer":0,"byteLength":600,"byteOffset":2800},{"buffer":0,"byteLength":200,"byteOffset":3400},{"buffer":0,"byteLength":600,"byteOffset":3600},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"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\nZmZGQGZmlkCamclAMzMTQM3MjEAzM7NAAABAQDMzg0AAALBAAAAgQAAAgEAAALBAZmYmQM3M\njEAzM8NAAABAQDMzk0CamblAZmYmQAAAgEAAAKBAMzMTQDMzU0AzM7NAzcwsQGZmhkBmZrZA\nAABAQGZmhkBmZrZAmpk5QGZmhkBmZsZAmpk5QJqZiUAzM6NAAAAgQAAAQEBmZrZAMzMzQDMz\ng0DfU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/wAA4EDNzExAZmaWQM3M\nzEDNzExAAACQQM3M3EBmZkZAzcycQAAAsEAzMxNAAACAQAAA0EAzMzNAMzOTQGZmtkAzMzNA\nAACQQJqZyUAzM1NAZmaWQM3MnECamRlAMzNTQDMz00CamTlAMzOTQGZmpkDNzCxAmpl5QAAA\noEAAAABAAABgQM3MvEAAAEBAZmaGQAAAwEDNzAxAAACAQDMzw0CamTlAZmaWQDMzs0CamTlA\nZmZmQGZm1kBmZkZAzcyMQDMzs0AAAEBAAACQQJqZuUDNzCxAMzODQGZmxkDNzAxAAACQQDMz\ns0AAACBAmpl5QM3MvEDNzExAmpmZQDMzw0AzMzNAAACAQJqZyUAAACBAzcycQDMzw0AzMzNA\nZmaWQM3MzECamTlAmpmJQDMz00AAAEBAzcyMQJqZ2UAzMzNAmpmZQGZm1kAAAEBAAACgQAAA\nwECamTlAAACQQGZmtkBmZiZAAABgQAAAsECamRlAMzNzQAAAsECamRlAzcxsQJqZuUDNzCxA\nmpl5QAAAwEDNzCxAMzOjQM3MrEAAAEBAAACQQAAAwECamVlAAACQQGZm1kBmZkZAZmaWQJqZ\nyUAzMxNAzcyMQDMzs0AAAEBAMzODQAAAsEAAACBAAACAQAAAsEBmZiZAzcyMQDMzw0AAAEBA\nMzOTQJqZuUBmZiZAAACAQAAAoEAzMxNAMzNTQDMzs0DNzCxAZmaGQGZmtkAAAEBAZmaGQGZm\ntkCamTlAZmaGQGZmxkCamTlAmpmJQDMzo0AAACBAAABAQGZmtkAzMzNAMzODQJqZyUAzM1NA\nAADAQJqZuUDNzCxAMzOjQDMz40AAAEBAzcy8QJqZyUCamTlAMzOzQAAA0EAAAEBAmpm5QDMz\n80AAAEBAMzPTQM3MnEAAACBAAACQQJqZ6UCamTlAmpnJQGZm1kAAACBAmpm5QGZm5kBmZmZA\nMzPDQAAA0EDNzExAMzOjQM3MzEDNzCxAmpmpQJqZ2UAAAEBAAACwQGZmtkAAACBAAACgQJqZ\nuUAzMzNAMzOjQM3MzEDNzExAmpmpQAAA0EAAAEBAAACwQGZm9kAzM3NAZmbWQGZm9kBmZiZA\nzczcQAAAwEDNzAxAAACgQM3M3EDNzExAZma2QDMzs0AzMzNAzcycQGZm9kAzMzNAZmbWQJqZ\nyUDNzCxAzcycQGZm1kAzM1NAZma2QGZm5kDNzExAAADAQGZmxkAzMzNAmpmZQDMzw0AAAEBA\nzcycQM3MzEAzMzNAMzOzQGZm5kAAAEBAmpm5QM3M7EAzMzNAMzPDQM3M/EAzM3NAzczMQM3M\nzEAzMzNAMzOzQJqZyUAzMzNAMzOjQDMzw0BmZiZAMzOzQGZm9kAAAEBAMzPDQJqZyUCamVlA\nMzOzQM3MzEBmZkZAAACwQAAAwEAAAEBAmpmZQM3M3EBmZkZAzcysQGZm1kBmZkZAMzOzQM3M\n3EBmZkZAMzOjQJqZuUDNzCxAMzOjQJqZ2UDNzExAzcy8QGZm1kAzM1NAZma2QGZm1kAAAEBA\nZmamQJqZyUAAACBAAACgQAAA0EAAAEBAZmamQGZmxkCamVlAzcysQM3MvEAAAEBAMzOjQGHQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//mpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":["rgl-play85533","rgl-play65470","rgl-play62970","rgl-play84558"],"webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[36,[]],"subscenes":null,"fullset":36,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"setosa","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl93587","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play85533","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play85533\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[37,[]],"subscenes":null,"fullset":37,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"versicolor","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl93587","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play65470","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play65470\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[38,[]],"subscenes":null,"fullset":38,"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"virginica","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl93587","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play62970","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play62970\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[[40,41,42,39],[]],"subscenes":null,"fullset":[40,41,42,39],"accumulate":false,"labels":null}],"start":0,"stop":1,"value":0,"interval":1,"rate":1,"components":"Step","buttonLabels":"axes","pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl93587","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play84558","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play84558\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["combineWidgets","combineWidgets","combineWidgets","combineWidgets"],"elementId":["widget788305135","widget408976921","widget883017404","widget940467284"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget788305135\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget408976921\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget883017404\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget940467284\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl93587","widget45556499"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl93587\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget45556499\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>Since we skipped the <code>label</code> argument, the buttons are
labelled with the values of the tags. The <code>asRow</code> function is
discussed <a href="#asRow">below</a>.</p>
<p><code><a href="../reference/toggleWidget.html">toggleWidget()</a></code> is actually a convenient wrapper for two
functions:
<a name="playwidget"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/playwidget.html"><code>playwidget</code></a>
and
<a name="subsetControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/propertyControl.html"><code>subsetControl</code></a>.
<code><a href="../reference/playwidget.html">playwidget()</a></code> adds the button to the web page (and can also
add sliders, do animations, etc.), while <code><a href="../reference/propertyControl.html">subsetControl()</a></code>
chooses a subset of objects to display.</p>
<div class="section level3">
<h3 id="subsetcontrol">
<code>subsetControl</code><a class="anchor" aria-label="anchor" href="#subsetcontrol"></a>
</h3>
<p>For a more general example, we could use a slider to select several
subsets of the data in the iris display. For example,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/playwidget.html">playwidget</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0</span>, stop <span class="op">=</span> <span class="fl">3</span>, interval <span class="op">=</span> <span class="fl">1</span>,</span>
<span>       <span class="fu"><a href="../reference/propertyControl.html">subsetControl</a></span><span class="op">(</span><span class="fl">1</span>, subsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                 Setosa <span class="op">=</span> <span class="fu"><a href="../reference/tagged3d.html">tagged3d</a></span><span class="op">(</span><span class="st">"setosa"</span><span class="op">)</span>,</span>
<span>                 Versicolor <span class="op">=</span> <span class="fu"><a href="../reference/tagged3d.html">tagged3d</a></span><span class="op">(</span><span class="st">"versicolor"</span><span class="op">)</span>,</span>
<span>                 Virginica <span class="op">=</span> <span class="fu"><a href="../reference/tagged3d.html">tagged3d</a></span><span class="op">(</span><span class="st">"virginica"</span><span class="op">)</span>,</span>
<span>                 All <span class="op">=</span> <span class="fu"><a href="../reference/tagged3d.html">tagged3d</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span>, <span class="st">"virginica"</span><span class="op">)</span><span class="op">)</span></span>
<span>                 <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-88fdd2a34d502a66744b" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-88fdd2a34d502a66744b">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"36":{"id":36,"type":"spheres","material":{"tag":"setosa"},"vertices":"0","colors":"1","radii":[[0.210999995470047]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"37":{"id":37,"type":"spheres","material":{"tag":"versicolor"},"vertices":"3","colors":"4","radii":[[0.210999995470047]],"centers":"5","ignoreExtent":false,"fastTransparency":true,"flags":32771},"38":{"id":38,"type":"spheres","material":{"tag":"virginica"},"vertices":"6","colors":"7","radii":[[0.210999995470047]],"centers":"8","ignoreExtent":false,"fastTransparency":true,"flags":32771},"40":{"id":40,"type":"text","material":{"lit":false,"margin":0,"floating":true,"tag":"axes","edge":[0,1,1]},"vertices":"9","colors":"10","texts":[["x"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"41":{"id":41,"type":"text","material":{"lit":false,"margin":1,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"12","colors":"13","texts":[["y"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"14","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"42":{"id":42,"type":"text","material":{"lit":false,"margin":2,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"15","colors":"16","texts":[["z"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"17","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"18","centers":"19","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"20","centers":"21","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"39":{"id":39,"type":"bboxdeco","material":{"front":"lines","back":"lines","tag":"axes"},"vertices":"22","colors":"23","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6919536590576],"modelMatrix":[[1.17337143421173,0,0,-7.15756559371948],[0,0.601974964141846,0.672778010368347,-4.58379364013672],[0,-1.65391254425049,0.244871184229851,-15.3666744232178],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-70.9872207641602],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337143421173,1.76005697250366,0.715955436229706],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.12017631530762,8.07982349395752,1.88011753559113,4.5198826789856,0.705288887023926,7.19471120834351],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,39,36,37,38,40,41,42,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":5,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":8,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":18,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":19,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":20,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":21,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":22,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":23,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":600,"byteOffset":0},{"buffer":0,"byteLength":200,"byteOffset":600},{"buffer":0,"byteLength":600,"byteOffset":800},{"buffer":0,"byteLength":600,"byteOffset":1400},{"buffer":0,"byteLength":200,"byteOffset":2000},{"buffer":0,"byteLength":600,"byteOffset":2200},{"buffer":0,"byteLength":600,"byteOffset":2800},{"buffer":0,"byteLength":200,"byteOffset":3400},{"buffer":0,"byteLength":600,"byteOffset":3600},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"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\nZmZGQGZmlkCamclAMzMTQM3MjEAzM7NAAABAQDMzg0AAALBAAAAgQAAAgEAAALBAZmYmQM3M\njEAzM8NAAABAQDMzk0CamblAZmYmQAAAgEAAAKBAMzMTQDMzU0AzM7NAzcwsQGZmhkBmZrZA\nAABAQGZmhkBmZrZAmpk5QGZmhkBmZsZAmpk5QJqZiUAzM6NAAAAgQAAAQEBmZrZAMzMzQDMz\ng0DfU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/wAA4EDNzExAZmaWQM3M\nzEDNzExAAACQQM3M3EBmZkZAzcycQAAAsEAzMxNAAACAQAAA0EAzMzNAMzOTQGZmtkAzMzNA\nAACQQJqZyUAzM1NAZmaWQM3MnECamRlAMzNTQDMz00CamTlAMzOTQGZmpkDNzCxAmpl5QAAA\noEAAAABAAABgQM3MvEAAAEBAZmaGQAAAwEDNzAxAAACAQDMzw0CamTlAZmaWQDMzs0CamTlA\nZmZmQGZm1kBmZkZAzcyMQDMzs0AAAEBAAACQQJqZuUDNzCxAMzODQGZmxkDNzAxAAACQQDMz\ns0AAACBAmpl5QM3MvEDNzExAmpmZQDMzw0AzMzNAAACAQJqZyUAAACBAzcycQDMzw0AzMzNA\nZmaWQM3MzECamTlAmpmJQDMz00AAAEBAzcyMQJqZ2UAzMzNAmpmZQGZm1kAAAEBAAACgQAAA\nwECamTlAAACQQGZmtkBmZiZAAABgQAAAsECamRlAMzNzQAAAsECamRlAzcxsQJqZuUDNzCxA\nmpl5QAAAwEDNzCxAMzOjQM3MrEAAAEBAAACQQAAAwECamVlAAACQQGZm1kBmZkZAZmaWQJqZ\nyUAzMxNAzcyMQDMzs0AAAEBAMzODQAAAsEAAACBAAACAQAAAsEBmZiZAzcyMQDMzw0AAAEBA\nMzOTQJqZuUBmZiZAAACAQAAAoEAzMxNAMzNTQDMzs0DNzCxAZmaGQGZmtkAAAEBAZmaGQGZm\ntkCamTlAZmaGQGZmxkCamTlAmpmJQDMzo0AAACBAAABAQGZmtkAzMzNAMzODQJqZyUAzM1NA\nAADAQJqZuUDNzCxAMzOjQDMz40AAAEBAzcy8QJqZyUCamTlAMzOzQAAA0EAAAEBAmpm5QDMz\n80AAAEBAMzPTQM3MnEAAACBAAACQQJqZ6UCamTlAmpnJQGZm1kAAACBAmpm5QGZm5kBmZmZA\nMzPDQAAA0EDNzExAMzOjQM3MzEDNzCxAmpmpQJqZ2UAAAEBAAACwQGZmtkAAACBAAACgQJqZ\nuUAzMzNAMzOjQM3MzEDNzExAmpmpQAAA0EAAAEBAAACwQGZm9kAzM3NAZmbWQGZm9kBmZiZA\nzczcQAAAwEDNzAxAAACgQM3M3EDNzExAZma2QDMzs0AzMzNAzcycQGZm9kAzMzNAZmbWQJqZ\nyUDNzCxAzcycQGZm1kAzM1NAZma2QGZm5kDNzExAAADAQGZmxkAzMzNAmpmZQDMzw0AAAEBA\nzcycQM3MzEAzMzNAMzOzQGZm5kAAAEBAmpm5QM3M7EAzMzNAMzPDQM3M/EAzM3NAzczMQM3M\nzEAzMzNAMzOzQJqZyUAzMzNAMzOjQDMzw0BmZiZAMzOzQGZm9kAAAEBAMzPDQJqZyUCamVlA\nMzOzQM3MzEBmZkZAAACwQAAAwEAAAEBAmpmZQM3M3EBmZkZAzcysQGZm1kBmZkZAMzOzQM3M\n3EBmZkZAMzOjQJqZuUDNzCxAMzOjQJqZ2UDNzExAzcy8QGZm1kAzM1NAZma2QGZm1kAAAEBA\nZmamQJqZyUAAACBAAACgQAAA0EAAAEBAZmamQGZmxkCamVlAzcysQM3MvEAAAEBAMzOjQGHQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//mpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play95963","webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"actions":[{"type":"subsetSetter","value":0,"subsets":[36,37,38,[36,37,38]],"subscenes":null,"fullset":[36,37,38],"accumulate":false,"labels":["Setosa","Versicolor","Virginica","All"]}],"start":0,"stop":3,"value":0,"interval":1,"rate":1,"components":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"buttonLabels":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"pause":"Pause","loop":true,"step":1,"labels":["Setosa","Versicolor","Virginica","All"],"precision":3,"reinit":null,"sceneId":"rgl69588","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play95963","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play95963\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl69588","widget528105488"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl69588\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget528105488\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>There are several other “control” functions.</p>
</div>
<div class="section level3">
<h3 id="par3dinterpcontrol">
<code>par3dinterpControl</code><a class="anchor" aria-label="anchor" href="#par3dinterpcontrol"></a>
</h3>
<p><a name="par3dinterpControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/par3dinterpControl.html"><code>par3dinterpControl</code></a>
approximates the result of
<a href="#par3dinterp"><code>par3dinterp</code></a>.</p>
<p>For example, the following code (similar to the
<a href="#play3d"><code>play3d</code></a> example) rotates the scene in
a complex way.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">M</span> <span class="op">&lt;-</span> <span class="va">r3dDefaults</span><span class="op">$</span><span class="va">userMatrix</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/par3dinterp.html">par3dinterp</a></span><span class="op">(</span>time <span class="op">=</span> <span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">0.75</span>, userMatrix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">M</span>,</span>
<span>                                      <span class="fu"><a href="../reference/matrices.html">rotate3d</a></span><span class="op">(</span><span class="va">M</span>, <span class="va">pi</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>                                      <span class="fu"><a href="../reference/matrices.html">rotate3d</a></span><span class="op">(</span><span class="va">M</span>, <span class="va">pi</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/playwidget.html">playwidget</a></span><span class="op">(</span><span class="fu"><a href="../reference/par3dinterpControl.html">par3dinterpControl</a></span><span class="op">(</span><span class="va">fn</span>, <span class="fl">0</span>, <span class="fl">3</span>, steps<span class="op">=</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>       step <span class="op">=</span> <span class="fl">0.01</span>, loop <span class="op">=</span> <span class="cn">TRUE</span>, rate <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8e1fe96c0688a849169a" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-8e1fe96c0688a849169a">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"36":{"id":36,"type":"spheres","material":{"tag":"setosa"},"vertices":"0","colors":"1","radii":[[0.210999995470047]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"37":{"id":37,"type":"spheres","material":{"tag":"versicolor"},"vertices":"3","colors":"4","radii":[[0.210999995470047]],"centers":"5","ignoreExtent":false,"fastTransparency":true,"flags":32771},"38":{"id":38,"type":"spheres","material":{"tag":"virginica"},"vertices":"6","colors":"7","radii":[[0.210999995470047]],"centers":"8","ignoreExtent":false,"fastTransparency":true,"flags":32771},"40":{"id":40,"type":"text","material":{"lit":false,"margin":0,"floating":true,"tag":"axes","edge":[0,1,1]},"vertices":"9","colors":"10","texts":[["x"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"41":{"id":41,"type":"text","material":{"lit":false,"margin":1,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"12","colors":"13","texts":[["y"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"14","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"42":{"id":42,"type":"text","material":{"lit":false,"margin":2,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"15","colors":"16","texts":[["z"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"17","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"18","centers":"19","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"20","centers":"21","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"39":{"id":39,"type":"bboxdeco","material":{"front":"lines","back":"lines","tag":"axes"},"vertices":"22","colors":"23","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6919536590576],"modelMatrix":[[1.17337143421173,0,0,-7.15756559371948],[0,0.601974964141846,0.672778010368347,-4.58379364013672],[0,-1.65391254425049,0.244871184229851,-15.3666744232178],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-70.9872207641602],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337143421173,1.76005697250366,0.715955436229706],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.12017631530762,8.07982349395752,1.88011753559113,4.5198826789856,0.705288887023926,7.19471120834351],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,39,36,37,38,40,41,42,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":5,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":8,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":18,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":19,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":20,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":21,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":22,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":23,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":600,"byteOffset":0},{"buffer":0,"byteLength":200,"byteOffset":600},{"buffer":0,"byteLength":600,"byteOffset":800},{"buffer":0,"byteLength":600,"byteOffset":1400},{"buffer":0,"byteLength":200,"byteOffset":2000},{"buffer":0,"byteLength":600,"byteOffset":2200},{"buffer":0,"byteLength":600,"byteOffset":2800},{"buffer":0,"byteLength":200,"byteOffset":3400},{"buffer":0,"byteLength":600,"byteOffset":3600},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"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\nZmZGQGZmlkCamclAMzMTQM3MjEAzM7NAAABAQDMzg0AAALBAAAAgQAAAgEAAALBAZmYmQM3M\njEAzM8NAAABAQDMzk0CamblAZmYmQAAAgEAAAKBAMzMTQDMzU0AzM7NAzcwsQGZmhkBmZrZA\nAABAQGZmhkBmZrZAmpk5QGZmhkBmZsZAmpk5QJqZiUAzM6NAAAAgQAAAQEBmZrZAMzMzQDMz\ng0DfU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/wAA4EDNzExAZmaWQM3M\nzEDNzExAAACQQM3M3EBmZkZAzcycQAAAsEAzMxNAAACAQAAA0EAzMzNAMzOTQGZmtkAzMzNA\nAACQQJqZyUAzM1NAZmaWQM3MnECamRlAMzNTQDMz00CamTlAMzOTQGZmpkDNzCxAmpl5QAAA\noEAAAABAAABgQM3MvEAAAEBAZmaGQAAAwEDNzAxAAACAQDMzw0CamTlAZmaWQDMzs0CamTlA\nZmZmQGZm1kBmZkZAzcyMQDMzs0AAAEBAAACQQJqZuUDNzCxAMzODQGZmxkDNzAxAAACQQDMz\ns0AAACBAmpl5QM3MvEDNzExAmpmZQDMzw0AzMzNAAACAQJqZyUAAACBAzcycQDMzw0AzMzNA\nZmaWQM3MzECamTlAmpmJQDMz00AAAEBAzcyMQJqZ2UAzMzNAmpmZQGZm1kAAAEBAAACgQAAA\nwECamTlAAACQQGZmtkBmZiZAAABgQAAAsECamRlAMzNzQAAAsECamRlAzcxsQJqZuUDNzCxA\nmpl5QAAAwEDNzCxAMzOjQM3MrEAAAEBAAACQQAAAwECamVlAAACQQGZm1kBmZkZAZmaWQJqZ\nyUAzMxNAzcyMQDMzs0AAAEBAMzODQAAAsEAAACBAAACAQAAAsEBmZiZAzcyMQDMzw0AAAEBA\nMzOTQJqZuUBmZiZAAACAQAAAoEAzMxNAMzNTQDMzs0DNzCxAZmaGQGZmtkAAAEBAZmaGQGZm\ntkCamTlAZmaGQGZmxkCamTlAmpmJQDMzo0AAACBAAABAQGZmtkAzMzNAMzODQJqZyUAzM1NA\nAADAQJqZuUDNzCxAMzOjQDMz40AAAEBAzcy8QJqZyUCamTlAMzOzQAAA0EAAAEBAmpm5QDMz\n80AAAEBAMzPTQM3MnEAAACBAAACQQJqZ6UCamTlAmpnJQGZm1kAAACBAmpm5QGZm5kBmZmZA\nMzPDQAAA0EDNzExAMzOjQM3MzEDNzCxAmpmpQJqZ2UAAAEBAAACwQGZmtkAAACBAAACgQJqZ\nuUAzMzNAMzOjQM3MzEDNzExAmpmpQAAA0EAAAEBAAACwQGZm9kAzM3NAZmbWQGZm9kBmZiZA\nzczcQAAAwEDNzAxAAACgQM3M3EDNzExAZma2QDMzs0AzMzNAzcycQGZm9kAzMzNAZmbWQJqZ\nyUDNzCxAzcycQGZm1kAzM1NAZma2QGZm5kDNzExAAADAQGZmxkAzMzNAmpmZQDMzw0AAAEBA\nzcycQM3MzEAzMzNAMzOzQGZm5kAAAEBAmpm5QM3M7EAzMzNAMzPDQM3M/EAzM3NAzczMQM3M\nzEAzMzNAMzOzQJqZyUAzMzNAMzOjQDMzw0BmZiZAMzOzQGZm9kAAAEBAMzPDQJqZyUCamVlA\nMzOzQM3MzEBmZkZAAACwQAAAwEAAAEBAmpmZQM3M3EBmZkZAzcysQGZm1kBmZkZAMzOzQM3M\n3EBmZkZAMzOjQJqZuUDNzCxAMzOjQJqZ2UDNzExAzcy8QGZm1kAzM1NAZma2QGZm1kAAAEBA\nZmamQJqZyUAAACBAAACgQAAA0EAAAEBAZmamQGZmxkCamVlAzcysQM3MvEAAAEBAMzOjQGHQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//mpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play69916","webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"actions":[{"type":"propertySetter","value":0,"values":[1,0,0,0,0.342020143325668,-0.939692620785909,0,0.939692620785909,0.342020143325668,0.998369041435951,0.050703068253648,0.0262384445409057,-0.00731460204482564,0.569415722160211,-0.822017172541846,-0.0566193756516804,0.820484572814402,0.568857901478376,0.98910539224113,0.105661522542142,0.102499588748425,-0.0601797380966138,0.925674267844166,-0.373504416270798,-0.134346277068413,0.363266833753431,0.921948092537001,0.990712394137505,0.0687949662607048,0.1172868480245,-0.0866843213832906,0.984106495092247,0.154984627442763,-0.104760586713955,-0.163712122136518,0.980929946804004,0.996736229447332,-0.0339197517668377,-0.0732553025192784,0.0572362288499404,0.936865474310421,0.344974052867963,0.0569289295011959,-0.348040993972243,0.935749199038215,0.828096221514596,-0.298486803738494,-0.474512672019649,0.343807556970808,0.938993750802656,0.0093327232533895,0.442778738969041,-0.170869435381339,0.880199195846854,0.345267169848214,-0.719548400865846,-0.602528572132814,0.320091605851983,0.693799361526748,-0.645123096632089,0.882231231190612,0.0298754875521824,0.469867545118214,0.0341197039486521,-0.921358025365572,-0.387214714205066,0.0487398057084367,0.3885132867595,-0.920153170592176,0.998228569588128,0.012522583830216,0.0581627694685787,0.0341197039486523,-0.921358025365572,-0.387214714205066,0.0487398057084373,0.3885132867595,-0.920153170592176,0.998228569588128,0.0125225838302158,0.0581627694685793,0.345267169848215,-0.719548400865845,-0.602528572132814,0.320091605851984,0.693799361526749,-0.645123096632088,0.882231231190611,0.0298754875521821,0.469867545118215,0.828096221514596,-0.298486803738494,-0.474512672019649,0.343807556970808,0.938993750802656,0.00933272325338992,0.44277873896904,-0.17086943538134,0.880199195846854,0.996736229447332,-0.0339197517668374,-0.0732553025192781,0.05723622884994,0.936865474310421,0.344974052867963,0.0569289295011957,-0.348040993972243,0.935749199038215,0.990712394137505,0.068794966260705,0.117286848024501,-0.0866843213832907,0.984106495092247,0.154984627442762,-0.104760586713956,-0.163712122136517,0.980929946804004,0.98910539224113,0.105661522542142,0.102499588748425,-0.0601797380966137,0.925674267844166,-0.373504416270798,-0.134346277068413,0.363266833753431,0.921948092537001,0.998369041435951,0.0507030682536479,0.0262384445409058,-0.00731460204482553,0.56941572216021,-0.822017172541847,-0.0566193756516804,0.820484572814402,0.568857901478376,1,0,0,0,0.342020143325668,-0.939692620785909,0,0.939692620785909,0.342020143325668],"entries":[0,1,2,4,5,6,8,9,10],"properties":["userMatrix","userMatrix","userMatrix","userMatrix","userMatrix","userMatrix","userMatrix","userMatrix","userMatrix"],"objids":7,"param":[0,0.2,0.4,0.6,0.8,1,1.2,1.4,1.6,1.8,2,2.2,2.4,2.6,2.8,3],"interp":true}],"start":0,"stop":3,"value":0,"interval":0.05,"rate":0.5,"components":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"buttonLabels":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"pause":"Pause","loop":true,"step":0.01,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl71188","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play69916","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play69916\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl71188","widget892419044"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl71188\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget892419044\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>Some things to note: The generated Javascript slider has 300
increments, so that motion appears smooth. However, storing 300
<code>userMatrix</code> values would take up a lot of space, so we use
interpolation in the Javascript code. However, the Javascript code can
only do linear interpolation, not the more complex spline-based SO(3)
interpolation done by
<a href="#par3dinterp"><code>par3dinterp</code></a>. Because of this, we
need to output 15 steps from
<a href="#par3dinterpControl"><code>par3dinterpControl</code></a> so
that the distortions of linear interpolation are not visible.</p>
</div>
<div class="section level3">
<h3 id="propertycontrol">
<code>propertyControl</code><a class="anchor" aria-label="anchor" href="#propertycontrol"></a>
</h3>
<p><a name="propertyControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/propertyControl.html"><code>propertyControl</code></a>
is a more general function to set the value of properties of the scene.
Currently most properties are supported, but use does require knowledge
of the internal implementation.</p>
</div>
<div class="section level3">
<h3 id="clipplanecontrol">
<code>clipplaneControl</code><a class="anchor" aria-label="anchor" href="#clipplanecontrol"></a>
</h3>
<p><a name="clipplaneControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/clipplaneControl.html"><code>clipplaneControl</code></a>
allows the user to control the location of a clipping plane by moving a
slider.</p>
</div>
<div class="section level3">
<h3 id="vertexcontrol">
<code>vertexControl</code><a class="anchor" aria-label="anchor" href="#vertexcontrol"></a>
</h3>
<p>Less general than
<a href="#propertyControl"><code>propertyControl</code></a> is
<a name="vertexControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/vertexControl.html"><code>vertexControl</code></a>.
This function sets attributes of individual vertices in a scene. For
example, to set the x-coordinate of the closest point in the setosa
group, and modify its colour from black to white,</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">setosavals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op">==</span> <span class="st">"setosa"</span><span class="op">)</span></span>
<span><span class="va">which</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.min</a></span><span class="op">(</span><span class="va">setosavals</span><span class="op">$</span><span class="va">Sepal.Width</span><span class="op">)</span></span>
<span><span class="va">init</span> <span class="op">&lt;-</span> <span class="va">setosavals</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">[</span><span class="va">which</span><span class="op">]</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/playwidget.html">playwidget</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/vertexControl.html">vertexControl</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">init</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span>, </span>
<span>                                     <span class="fl">8</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span><span class="op">)</span>, </span>
<span>                                nrow <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>                vertices <span class="op">=</span> <span class="va">which</span>, tag <span class="op">=</span> <span class="st">"setosa"</span><span class="op">)</span>,</span>
<span>    step <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-bb3486349adfa5d821dc" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-bb3486349adfa5d821dc">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"36":{"id":36,"type":"spheres","material":{"tag":"setosa"},"vertices":"0","colors":"1","radii":[[0.210999995470047]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"37":{"id":37,"type":"spheres","material":{"tag":"versicolor"},"vertices":"3","colors":"4","radii":[[0.210999995470047]],"centers":"5","ignoreExtent":false,"fastTransparency":true,"flags":32771},"38":{"id":38,"type":"spheres","material":{"tag":"virginica"},"vertices":"6","colors":"7","radii":[[0.210999995470047]],"centers":"8","ignoreExtent":false,"fastTransparency":true,"flags":32771},"40":{"id":40,"type":"text","material":{"lit":false,"margin":0,"floating":true,"tag":"axes","edge":[0,1,1]},"vertices":"9","colors":"10","texts":[["x"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"41":{"id":41,"type":"text","material":{"lit":false,"margin":1,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"12","colors":"13","texts":[["y"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"14","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"42":{"id":42,"type":"text","material":{"lit":false,"margin":2,"floating":true,"tag":"axes","edge":[1,1,1]},"vertices":"15","colors":"16","texts":[["z"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"17","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"10":{"id":10,"type":"background","material":{},"colors":"18","centers":"19","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"20","centers":"21","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"39":{"id":39,"type":"bboxdeco","material":{"front":"lines","back":"lines","tag":"axes"},"vertices":"22","colors":"23","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6919536590576],"modelMatrix":[[1.17337143421173,0,0,-7.15756559371948],[0,0.601974964141846,0.672778010368347,-4.58379364013672],[0,-1.65391254425049,0.244871184229851,-15.3666744232178],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-70.9872207641602],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337143421173,1.76005697250366,0.715955436229706],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.12017631530762,8.07982349395752,1.88011753559113,4.5198826789856,0.705288887023926,7.19471120834351],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,39,36,37,38,40,41,42,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":5,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":50,"type":"VEC4","normalized":true},{"bufferView":8,"componentType":5126,"count":50,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":18,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":19,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":20,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":21,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":22,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":23,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":600,"byteOffset":0},{"buffer":0,"byteLength":200,"byteOffset":600},{"buffer":0,"byteLength":600,"byteOffset":800},{"buffer":0,"byteLength":600,"byteOffset":1400},{"buffer":0,"byteLength":200,"byteOffset":2000},{"buffer":0,"byteLength":600,"byteOffset":2200},{"buffer":0,"byteLength":600,"byteOffset":2800},{"buffer":0,"byteLength":200,"byteOffset":3400},{"buffer":0,"byteLength":600,"byteOffset":3600},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":16,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4300},{"buffer":0,"byteLength":4,"byteOffset":4303},{"buffer":0,"byteLength":3,"byteOffset":4307},{"buffer":0,"byteLength":204,"byteOffset":4312},{"buffer":0,"byteLength":4,"byteOffset":4516}],"buffers":[{"byteLength":4520,"bytes":"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\nZmZGQGZmlkCamclAMzMTQM3MjEAzM7NAAABAQDMzg0AAALBAAAAgQAAAgEAAALBAZmYmQM3M\njEAzM8NAAABAQDMzk0CamblAZmYmQAAAgEAAAKBAMzMTQDMzU0AzM7NAzcwsQGZmhkBmZrZA\nAABAQGZmhkBmZrZAmpk5QGZmhkBmZsZAmpk5QJqZiUAzM6NAAAAgQAAAQEBmZrZAMzMzQDMz\ng0DfU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/wAA4EDNzExAZmaWQM3M\nzEDNzExAAACQQM3M3EBmZkZAzcycQAAAsEAzMxNAAACAQAAA0EAzMzNAMzOTQGZmtkAzMzNA\nAACQQJqZyUAzM1NAZmaWQM3MnECamRlAMzNTQDMz00CamTlAMzOTQGZmpkDNzCxAmpl5QAAA\noEAAAABAAABgQM3MvEAAAEBAZmaGQAAAwEDNzAxAAACAQDMzw0CamTlAZmaWQDMzs0CamTlA\nZmZmQGZm1kBmZkZAzcyMQDMzs0AAAEBAAACQQJqZuUDNzCxAMzODQGZmxkDNzAxAAACQQDMz\ns0AAACBAmpl5QM3MvEDNzExAmpmZQDMzw0AzMzNAAACAQJqZyUAAACBAzcycQDMzw0AzMzNA\nZmaWQM3MzECamTlAmpmJQDMz00AAAEBAzcyMQJqZ2UAzMzNAmpmZQGZm1kAAAEBAAACgQAAA\nwECamTlAAACQQGZmtkBmZiZAAABgQAAAsECamRlAMzNzQAAAsECamRlAzcxsQJqZuUDNzCxA\nmpl5QAAAwEDNzCxAMzOjQM3MrEAAAEBAAACQQAAAwECamVlAAACQQGZm1kBmZkZAZmaWQJqZ\nyUAzMxNAzcyMQDMzs0AAAEBAMzODQAAAsEAAACBAAACAQAAAsEBmZiZAzcyMQDMzw0AAAEBA\nMzOTQJqZuUBmZiZAAACAQAAAoEAzMxNAMzNTQDMzs0DNzCxAZmaGQGZmtkAAAEBAZmaGQGZm\ntkCamTlAZmaGQGZmxkCamTlAmpmJQDMzo0AAACBAAABAQGZmtkAzMzNAMzODQJqZyUAzM1NA\nAADAQJqZuUDNzCxAMzOjQDMz40AAAEBAzcy8QJqZyUCamTlAMzOzQAAA0EAAAEBAmpm5QDMz\n80AAAEBAMzPTQM3MnEAAACBAAACQQJqZ6UCamTlAmpnJQGZm1kAAACBAmpm5QGZm5kBmZmZA\nMzPDQAAA0EDNzExAMzOjQM3MzEDNzCxAmpmpQJqZ2UAAAEBAAACwQGZmtkAAACBAAACgQJqZ\nuUAzMzNAMzOjQM3MzEDNzExAmpmpQAAA0EAAAEBAAACwQGZm9kAzM3NAZmbWQGZm9kBmZiZA\nzczcQAAAwEDNzAxAAACgQM3M3EDNzExAZma2QDMzs0AzMzNAzcycQGZm9kAzMzNAZmbWQJqZ\nyUDNzCxAzcycQGZm1kAzM1NAZma2QGZm5kDNzExAAADAQGZmxkAzMzNAmpmZQDMzw0AAAEBA\nzcycQM3MzEAzMzNAMzOzQGZm5kAAAEBAmpm5QM3M7EAzMzNAMzPDQM3M/EAzM3NAzczMQM3M\nzEAzMzNAMzOzQJqZyUAzMzNAMzOjQDMzw0BmZiZAMzOzQGZm9kAAAEBAMzPDQJqZyUCamVlA\nMzOzQM3MzEBmZkZAAACwQAAAwEAAAEBAmpmZQM3M3EBmZkZAzcysQGZm1kBmZkZAMzOzQM3M\n3EBmZkZAMzOjQJqZuUDNzCxAMzOjQJqZ2UDNzExAzcy8QGZm1kAzM1NAZma2QGZm1kAAAEBA\nZmamQJqZyUAAACBAAACgQAAA0EAAAEBAZmamQGZmxkCamVlAzcysQM3MvEAAAEBAMzOjQGHQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//mpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/mZiYPpmYmD6ZmJg+AACAPwAAAAEBAQEAAAAAAAAAoEAAAMB/\nAADAfwAAwEAAAMB/AADAfwAA4EAAAMB/AADAfwAAAEEAAMB/AADAfwAAwH8AAABAAADAfwAA\nwH8AACBAAADAfwAAwH8AAEBAAADAfwAAwH8AAGBAAADAfwAAwH8AAIBAAADAfwAAwH8AAJBA\nAADAfwAAwH8AAMB/AACAPwAAwH8AAMB/AAAAQAAAwH8AAMB/AABAQAAAwH8AAMB/AACAQAAA\nwH8AAMB/AACgQAAAwH8AAMB/AADAQAAAwH8AAMB/AADgQAAAAAE="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play11478","webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"actions":[{"type":"vertexSetter","value":0,"values":[[4.5,0,0,0],[4.5,0,0,0],[8,1,1,1],[8,1,1,1]],"vertices":41,"attributes":["x","red","green","blue"],"objid":36,"param":[null,0,1,null],"interp":true}],"start":0,"stop":1,"value":0,"interval":0.05,"rate":1,"components":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"buttonLabels":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"pause":"Pause","loop":true,"step":0.01,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl46066","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play11478","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play11478\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl46066","widget551435014"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl46066\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget551435014\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="agecontrol">
<code>ageControl</code><a class="anchor" aria-label="anchor" href="#agecontrol"></a>
</h3>
<p>A related function is
<a name="ageControl"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/ageControl.html"><code>ageControl</code></a>,
though it uses a very different specification of the attributes. It is
used when the slider controls the “age” of the scene, and attributes of
vertices change with their age.</p>
<p>To illustrate we will show a point moving along a curve. We give two
<code>ageControl</code> calls in a list; the first one controls the
colour of the trail, the second controls the position of the point:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">500</span></span>
<span><span class="va">xyz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">time</span><span class="op">/</span><span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">time</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span>, <span class="va">time</span><span class="op">)</span></span>
<span><span class="va">lineid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">xyz</span>, type<span class="op">=</span><span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span></span>
<span><span class="va">sphereid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spheres.html">spheres3d</a></span><span class="op">(</span><span class="va">xyz</span><span class="op">[</span><span class="fl">1</span>, , drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span>, radius <span class="op">=</span> <span class="fl">8</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/playwidget.html">playwidget</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/ageControl.html">ageControl</a></span><span class="op">(</span>births <span class="op">=</span> <span class="va">time</span>, ages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>        colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gray"</span>, <span class="st">"red"</span>, <span class="st">"gray"</span><span class="op">)</span>, objids <span class="op">=</span> <span class="va">lineid</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/ageControl.html">ageControl</a></span><span class="op">(</span>births <span class="op">=</span> <span class="fl">0</span>, ages <span class="op">=</span> <span class="va">time</span>,</span>
<span>        vertices <span class="op">=</span> <span class="va">xyz</span>, objids <span class="op">=</span> <span class="va">sphereid</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">0</span>, stop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op">+</span> <span class="fl">20</span>, rate <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  components <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Reverse"</span>, <span class="st">"Play"</span>, <span class="st">"Slower"</span>, <span class="st">"Faster"</span>,</span>
<span>                 <span class="st">"Reset"</span>, <span class="st">"Slider"</span>, <span class="st">"Label"</span><span class="op">)</span>,</span>
<span>  loop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-44474b3e8cd160f85a98" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-44474b3e8cd160f85a98">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"67":{"id":67,"type":"linestrip","material":{"lit":false},"vertices":"0","colors":"1","centers":"2","ignoreExtent":false,"flags":32832},"69":{"id":69,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"70":{"id":70,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[[""]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"71":{"id":71,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["time"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"72":{"id":72,"type":"spheres","material":{},"vertices":"12","colors":"13","radii":[[8]],"centers":"14","ignoreExtent":false,"fastTransparency":true,"flags":32771},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"15","centers":"16","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"68":{"id":68,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"17","colors":"18","axes":{"mode":["pretty","pretty","pretty"],"step":[0.5,0.5,100],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,1246.23266601562],"modelMatrix":[[144.342163085938,0,0,-4.00227975845337],[0,49.3675422668457,0.542540431022644,-131.876419067383],[0,-135.636199951172,0.19746857881546,-1294.2314453125],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370301246643,-4492.5244140625],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[144.342163085938,144.341033935547,0.57735949754715],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-0.999968290328979,1.05542385578156,-0.999990224838257,0.999993741512299,-13.8561849594116,500],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,68,67,69,70,71,72,11],"subscenes":[],"flags":34131}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":501,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":2,"componentType":5126,"count":501,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":14,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":16,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":17,"componentType":5126,"count":13,"type":"VEC3"},{"bufferView":18,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":6012,"byteOffset":0},{"buffer":0,"byteLength":4,"byteOffset":6012},{"buffer":0,"byteLength":6012,"byteOffset":6016},{"buffer":0,"byteLength":12,"byteOffset":12028},{"buffer":0,"byteLength":4,"byteOffset":12040},{"buffer":0,"byteLength":12,"byteOffset":12044},{"buffer":0,"byteLength":12,"byteOffset":12056},{"buffer":0,"byteLength":4,"byteOffset":12068},{"buffer":0,"byteLength":12,"byteOffset":12072},{"buffer":0,"byteLength":12,"byteOffset":12084},{"buffer":0,"byteLength":4,"byteOffset":12096},{"buffer":0,"byteLength":12,"byteOffset":12100},{"buffer":0,"byteLength":3,"byteOffset":12112},{"buffer":0,"byteLength":4,"byteOffset":12115},{"buffer":0,"byteLength":3,"byteOffset":12119},{"buffer":0,"byteLength":4,"byteOffset":12122},{"buffer":0,"byteLength":3,"byteOffset":12126},{"buffer":0,"byteLength":156,"byteOffset":12132},{"buffer":0,"byteLength":4,"byteOffset":12288}],"buffers":[{"byteLength":12292,"bytes":"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"}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":"rgl-play48872","webGLoptions":{"preserveDrawingBuffer":true}},{"data":[{"actions":[{"type":"ageSetter","objids":67,"value":0,"births":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500],"ages":[null,0,0,50,null],"colors":[0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686,1,0,0,0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686,0.745098039215686]},{"type":"ageSetter","objids":72,"value":0,"births":0,"ages":[null,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,null],"vertices":[1,0,0,1,0,0,0.998750260394966,0.0998334166468282,1,0.995004165278026,0.198669330795061,2,0.988771077936042,0.29552020666134,3,0.980066577841242,0.389418342308651,4,0.968912421710645,0.479425538604203,5,0.955336489125606,0.564642473395035,6,0.939372712847379,0.644217687237691,7,0.921060994002885,0.717356090899523,8,0.900447102352677,0.783326909627483,9,0.877582561890373,0.841470984807897,10,0.852524522059506,0.891207360061435,11,0.825335614909678,0.932039085967226,12,0.796083798549056,0.963558185417193,13,0.764842187284488,0.98544972998846,14,0.731688868873821,0.997494986604054,15,0.696706709347165,0.999573603041505,16,0.659983145884982,0.991664810452469,17,0.621609968270665,0.973847630878195,18,0.581683089463884,0.946300087687414,19,0.54030230586814,0.909297426825682,20,0.497571047891727,0.863209366648874,21,0.453596121425577,0.80849640381959,22,0.408487440884157,0.74570521217672,23,0.362357754476674,0.675463180551151,24,0.315322362395269,0.598472144103956,25,0.267498828624587,0.515501371821464,26,0.219006687093041,0.42737988023383,27,0.169967142900241,0.334988150155905,28,0.120502769367367,0.239249329213982,29,0.0707372016677029,0.141120008059867,30,0.0207948278030924,0.0415806624332905,31,-0.0291995223012888,-0.0583741434275801,32,-0.0791208888067339,-0.157745694143248,33,-0.128844494295525,-0.255541102026831,34,-0.178246055649492,-0.35078322768962,35,-0.227202094693087,-0.442520443294852,36,-0.275590246824513,-0.529836140908493,37,-0.323289566863503,-0.611857890942719,38,-0.370180831351287,-0.687766159183974,39,-0.416146836547142,-0.756802495307928,40,-0.461072691376713,-0.81827711106441,41,-0.504846104599857,-0.871575772413588,42,-0.547357665480271,-0.916165936749455,43,-0.588501117255346,-0.951602073889516,44,-0.628173622722739,-0.977530117665097,45,-0.666276021279824,-0.993691003633464,46,-0.702713076773554,-0.999923257564101,47,-0.737393715541245,-0.996164608835841,48,-0.770231254047308,-0.982452612624332,49,-0.801143615546934,-0.958924274663138,50,-0.830053535235222,-0.925814682327732,51,-0.856888753368947,-0.883454655720153,52,-0.881582195878286,-0.832267442223901,53,-0.904072142017061,-0.772764487555987,54,-0.924302378632464,-0.705540325570392,55,-0.942222340668658,-0.631266637872322,56,-0.95778723755309,-0.550685542597638,57,-0.970958165149591,-0.464602179413757,58,-0.981702202998454,-0.373876664830236,59,-0.989992496600445,-0.279415498198926,60,-0.995808324539061,-0.182162504272096,61,-0.999135150273279,-0.0830894028174964,62,-0.999964658471342,0.0168139004843497,63,-0.998294775794753,0.116549204850494,64,-0.994129676080546,0.215119988087816,65,-0.987479769908865,0.311541363513378,66,-0.978361678581934,0.404849920616598,67,-0.966798192579461,0.494113351138608,68,-0.952818214594305,0.5784397643882,69,-0.936456687290796,0.656986598718789,70,-0.917754505966276,0.728969040125876,71,-0.896758416334147,0.793667863849153,72,-0.873520897683938,0.850436620628564,73,-0.848100031710408,0.898708095811627,74,-0.820559357339561,0.937999976774739,75,-0.790967711914417,0.967919672031486,76,-0.759399059137508,0.988168233877,77,-0.72593230420014,0.998543345374605,78,-0.690651096560508,0.998941341839772,79,-0.653643620863612,0.989358246623382,80,-0.615002376525574,0.969889810845086,81,-0.574823946533269,0.940730556679773,82,-0.533208756037154,0.902171833756293,83,-0.490260821340699,0.854598908088281,84,-0.446087489913793,0.79848711262349,85,-0.400799172079975,0.734397097874113,86,-0.354509065048132,0.662969230082183,87,-0.307332869978419,0.584917192891762,88,-0.259388502789626,0.501020856457885,89,-0.21079579943078,0.412118485241757,90,-0.161676216353687,0.319098362349352,91,-0.112152526935055,0.222889914100248,92,-0.0623485146069917,0.124454423507062,93,-0.0123886634628906,0.0247754254533578,94,0.0376021528879766,-0.0751511204618093,95,0.0874989834394464,-0.17432678122298,96,0.137177112100907,-0.271760626410942,97,0.186512369422576,-0.366479129251928,98,0.235381442954451,-0.457535893775321,99,0.283662185463226,-0.54402111088937,100,0.331233920236754,-0.625070648892882,101,0.37797774271298,-0.699874687593542,102,0.423776817679428,-0.767685809763582,103,0.468516671300377,-0.827826469085654,104,0.512085477241841,-0.87969575997167,105,0.554374336179161,-0.922775421612807,106,0.595277547988606,-0.956635016270188,107,0.634692875942635,-0.980936230066492,108,0.672521802248466,-0.995436253306377,109,0.70866977429126,-0.999990206550703,110,0.74304644096641,-0.994552588203989,111,0.77556587851025,-0.979177729151317,112,0.806146805264716,-0.954019249902089,113,0.83471278483916,-0.919328525664676,114,0.861192417161521,-0.875452174688429,115,0.885519516941319,-0.822828594968709,116,0.907633279098413,-0.761983583919033,117,0.927478430744036,-0.693525084777122,118,0.945005369334228,-0.618137112237033,119,0.960170286650366,-0.536572918000435,120,0.972935278296897,-0.449647464534601,121,0.983268438442584,-0.358229282236829,122,0.991143939568469,-0.263231791365801,123,0.996542097023217,-0.165604175448309,124,0.999449418224499,-0.0663218973512007,125,0.999858636383415,0.0336230472211367,126,0.997768728667684,0.133232041419942,127,0.993184918758193,0.231509825101539,128,0.986118663792513,0.327474439137693,129,0.976587625728023,0.420167036826641,130,0.964615627196218,0.508661464372374,131,0.95023259195853,0.592073514707223,132,0.933474470112512,0.669569762196602,133,0.914383148235319,0.740375889952449,134,0.893006344689077,0.803784426551621,135,0.869397490349825,0.859161814856496,136,0.84361559505816,0.905954742308462,137,0.815725100125357,0.943695669444105,138,0.785795717263661,0.972007501394976,139,0.753902254343305,0.99060735569487,140,0.720124428411794,0.999309388747918,141,0.684546666442807,0.998026652716362,142,0.647257894312724,0.986771964274613,143,0.608351314532255,0.965657776549278,144,0.567924173288695,0.934895055524683,145,0.526077517381105,0.894791172140504,146,0.482915941655938,0.845746831142934,147,0.43854732757439,0.788252067375316,148,0.393082573564941,0.722881349511976,149,0.346635317835026,0.650287840157117,150,0.299321654334707,0.571196869659989,151,0.251259842582256,0.4863986888538,152,0.202570012076944,0.396740573130612,153,0.153373862037864,0.303118356745702,154,0.103794357219253,0.206467481937797,155,0.0539554205626498,0.107753652299444,156,0.00398162345407974,0.00796318378593734,157,-0.0460021256395369,-0.0919068502276816,158,-0.0958708933764978,-0.190858581374189,159,-0.145500033808614,-0.287903316665065,160,-0.194765499931161,-0.382071417184009,161,-0.243544153735791,-0.472421986398466,162,-0.291714073991426,-0.558052271286779,163,-0.339154860983835,-0.638106682347947,164,-0.385747937452222,-0.711785342369123,165,-0.431376844970621,-0.778352078534299,166,-0.47592753503331,-0.837141778019747,167,-0.519288654116686,-0.887567033581505,168,-0.561351822005071,-0.929124012734368,169,-0.602011902684824,-0.961397491879557,170,-0.641167267129602,-0.984065005081643,171,-0.678720047320012,-0.996900066041596,172,-0.714576380862692,-0.999774431073011,173,-0.748646645597399,-0.992659380470633,174,-0.780845683605749,-0.975626005468158,175,-0.811093014061656,-0.948844497918124,176,-0.839313034391484,-0.912582449791185,177,-0.865435209241112,-0.867202179485581,178,-0.889394246777581,-0.813157111661488,179,-0.911130261884677,-0.750987246771676,180,-0.930588925844528,-0.6813137655555,181,-0.947721602131112,-0.604832822406284,182,-0.962485467976237,-0.522308589626732,183,-0.974843621404164,-0.434565622071897,184,-0.984765173467324,-0.342480618469613,185,-0.992225325452603,-0.246973661736621,186,-0.997205430865212,-0.148999025814199,187,-0.999693042035206,-0.0495356408783674,188,-0.999681941230185,0.0504226878068112,189,-0.997172156196378,0.149877209662952,190,-0.992169960089301,0.24783420798296,191,-0.984687855794127,0.343314928819895,192,-0.974744544674989,0.435365360372893,193,-0.96236487983131,0.523065765157696,194,-0.947579803977993,0.605539869719601,195,-0.930426272104753,0.681963620068135,196,-0.910947159107888,0.751573415352148,197,-0.889191152625361,0.813673737507105,198,-0.865212631343072,0.867644100641667,199,-0.839071529076452,0.912945250727628,200,-0.810833184967147,0.949124553647895,201,-0.780568180169184,0.975820517766976,202,-0.748352161432847,0.992766405835907,203,-0.7142656520272,0.999792900142669,204,-0.678393850473845,0.996829794278799,205,-0.640826417594993,0.983906694618616,206,-0.601657252408102,0.961152724502117,207,-0.560984257427229,0.92879523407724,208,-0.518909093957743,0.887157528692351,209,-0.475536927995993,0.836655638536056,210,-0.430976167369097,0.777794161801093,211,-0.38533819077183,0.711161222905982,212,-0.338737069377881,0.637422596150239,213,-0.291289281721346,0.557315053517661,214,-0.24311342256103,0.471639003094196,215,-0.194329906455335,0.38125049165494,216,-0.145060666788562,0.287052651327728,217,-0.0954288510009507,0.189986675795438,218,-0.0455585127842237,0.0910224161998479,219,0.00442569798805079,-0.00885130929040388,220,0.0543988468202141,-0.10863659542408,221,0.104236026865697,-0.207336420606759,222,0.153812671129091,-0.303964608811047,223,0.20300486381875,-0.397555683121433,224,0.251689650071754,-0.48717451246051,225,0.299745343277015,-0.571925655109564,226,0.347051829228438,-0.650962305666247,227,0.393490866347891,-0.723494756044245,228,0.438946381227554,-0.788798285975416,229,0.483304758753006,-0.846220404175171,230,0.526455126081828,-0.895187367819682,231,0.568289629767974,-0.935209915194539,232,0.608703705339219,-0.96588815423607,233,0.647596338653876,-0.986915558120649,234,0.684870318383553,-0.998082027979396,235,0.720432478990839,-0.999275992136628,236,0.754193933594628,-0.990485520897156,237,0.786070296141039,-0.971798445743863,238,0.815981892324594,-0.943401481754556,239,0.843853958732492,-0.905578362006624,240,0.869616829714206,-0.858707002609929,241,0.893206111509322,-0.803255726693955,242,0.914562843198418,-0.739778585077893,243,0.933633644074637,-0.668909820378024,244,0.950370847067673,-0.591357529865124,245,0.96473261788661,-0.507896590390622,246,0.976683059583864,-0.419360916073231,247,0.986192302278864,-0.326635126104722,248,0.993236577817188,-0.230645705927396,249,0.997798279178581,-0.132351750097773,250,0.999866004485325,-0.0327353793308453,251,0.999434585501005,0.0672080725254749,252,0.996505100548402,0.166480003537159,253,0.991084871814253,0.264088521384469,254,0.983187447047592,0.359058354022168,255,0.972832565697435,0.450440594275389,256,0.960046109574442,0.537322181006472,257,0.944860038159861,0.618835022120039,258,0.927312308723476,0.694164668252242,259,0.907446781450196,0.762558450479603,260,0.885313109812439,0.823333000738082,261,0.860966616462306,0.875881079810889,262,0.834468154953763,0.91967764466202,263,0.805883957640451,0.954285094492697,264,0.775285470129288,0.979357643103917,265,0.742749172703669,0.994644773877838,266,0.708356389162585,0.999993742857021,267,0.672193083553468,0.995351104911559,268,0.63434964530686,0.980763247745153,269,0.594920663309892,0.956375928404503,270,0.554004689483342,0.922432816923086,271,0.511703992453149,0.879273061650724,272,0.46812430193211,0.827327900595379,273,0.423374544450665,0.76711635263553,274,0.377566571097293,0.699240031655098,275,0.330814877949047,0.624377135416391,276,0.283236319890988,0.543275669232248,277,0.234949818539823,0.456745972144193,278,0.186076065001811,0.365652620282621,279,0.136737218207834,0.270905788307869,280,0.0870565995797034,0.173452155245892,281,0.0371583847908264,0.0742654455843613,282,-0.0128327066083168,-0.0256632998605595,283,-0.0627917229240818,-0.125335626096429,284,-0.112593792633835,-0.223755640186796,285,-0.162114436499718,-0.319939961884198,286,-0.211229878701916,-0.41292754924054,287,-0.259817356213756,-0.501789301020574,288,-0.307755425645323,-0.585637339974298,289,-0.354924266788705,-0.663633884212968,290,-0.401205982106101,-0.734999618048778,291,-0.446484891412266,-0.799021478659614,292,-0.490647821014738,-0.85505978077707,293,-0.533584386589118,-0.902554608210185,294,-0.575187269082403,-0.941031408342954,295,-0.615352482954721,-0.970105733707185,296,-0.653979636089029,-0.989487083254535,297,-0.690972180719126,-0.998981804946949,298,-0.726237654748779,-0.998495030663815,299,-0.759687912858821,-0.988031624092862,300,-0.791239346824533,-0.967696132133805,301,-0.820813094492668,-0.937691740300281,302,-0.848335236895769,-0.898318242557355,303,-0.87373698301108,-0.849969045879328,304,-0.896954841702289,-0.793127239457285,305,-0.917930780414293,-0.728360767831593,306,-0.93661237022437,-0.65631675617779,307,-0.95295291688718,-0.577715044445732,308,-0.966911577546057,-0.493340994956778,309,-0.978453462818884,-0.404037645323065,310,-0.987549724003377,-0.310697285094372,311,-0.994177625183815,-0.214252540295888,312,-0.998320600058992,-0.115667054937237,313,-0.99996829334934,-0.0159258626001018,314,-0.999116586679734,0.0839744556917468,315,-0.995767608873289,0.183035728980588,316,-0.989929730630406,0.28026816976902,317,-0.981617543606384,0.374700263649462,318,-0.970851823939882,0.465388476354956,319,-0.957659480323385,0.551426681241691,320,-0.942073486745495,0.631955213006885,321,-0.92413280007313,0.706169457180334,322,-0.903882262679641,0.773327889566221,323,-0.881372490362235,0.83275948530778,324,-0.856659745828842,0.883870423545831,325,-0.829805798070649,0.926150020680529,326,-0.800877767971785,0.95917583295308,327,-0.769947960542072,0.98261787736414,328,-0.737093684192148,0.996241928754864,329,-0.702397057502714,0.999911860107267,330,-0.665944803970839,0.993591002680395,331,-0.627828035246386,0.977342512392259,332,-0.58814202340034,0.951328738786783,333,-0.546985962794236,0.915809602890819,334,-0.504462722145928,0.871140000169176,335,-0.460678587411363,0.817766254526442,336,-0.415742996125039,0.756221658786063,337,-0.369768263863173,0.687121146204744,338,-0.322869303513235,0.611155146262596,339,-0.275163338051597,0.529082686120024,340,-0.226769607547126,0.441723806669224,341,-0.177809071123116,0.349951368956662,342,-0.128404104622475,0.254682332844035,343,-0.0786781947318402,0.15686859504841,344,-0.0287556303291872,0.0574874781049246,345,0.021238808173646,-0.0424680347169515,346,0.0711801607170025,-0.141999220974002,347,0.120943599928474,-0.240111597953774,348,0.170404743126337,-0.335824859217142,349,0.219439963211459,-0.428182669496151,350,0.267926697670676,-0.516262220079927,351,0.315743754919243,-0.599183449214265,352,0.362771617216678,-0.676117835387764,353,0.40889273939888,-0.746296675644916,354,0.453991842679807,-0.809018766211906,355,0.497956202788415,-0.863657408692956,356,0.54067593172063,-0.909666671833528,357,0.582044252402122,-0.94658684628496,358,0.621957765575399,-0.974049037868326,359,0.66031670824408,-0.991778853443116,360,0.697025203028445,-0.999599142552803,361,0.731991497808947,-0.997431767453648,362,0.765128195058727,-0.985298383841204,363,0.796352470291923,-0.963320224473761,364,0.825586279081739,-0.931716887854706,365,0.852756552130873,-0.890804144076861,366,0.877795377906707,-0.840990779752102,367,0.900640172384768,-0.782774513550654,368,0.921233835476204,-0.716737023160658,369,0.939524893748256,-0.643538133356999,370,0.955467629081043,-0.563909223250262,371,0.96902219293905,-0.478645918588415,372,0.980154705971711,-0.388600142127343,373,0.988837342694146,-0.294671601500258,374,0.995048401036379,-0.197798799636462,375,0.99877235658721,-0.0989496575502895,376,0.999999901397162,0.000888156805717592,377,0.998727967243502,0.100717096992501,378,0.994959733299203,0.199539705238787,379,0.988704618186669,0.296368578709385,380,0.97997825643608,0.390236235307946,381,0.96880245940721,0.480204780438259,382,0.955205160772391,0.565375278137023,383,0.939220346696871,0.644896732944867,384,0.92088797089111,0.717974592771644,385,0.900253854747304,0.783878687798293,386,0.877369572809775,0.841950526092305,387,0.852292323865464,0.891609873041441,388,0.82508478797675,0.932360548866189,389,0.795814969813944,0.963795386284088,390,0.764556028679028,0.985600298790633,391,0.731386095645497,0.997557418907805,392,0.69638807827137,0.999547275043892,393,0.659649453373462,0.991549985214141,394,0.621262048380915,0.973645455694978,395,0.581321811814436,0.946012582626908,396,0.539928573464967,0.908927464543414,397,0.497185794871205,0.862760643685679,398,0.453200310719619,0.807973403666985,399,0.408082061813392,0.745113160479349,400,0.361943820277661,0.674807992893867,401,0.314900907687934,0.597760366905255,402,0.267070906826213,0.514740116923838,403,0.218573367785263,0.426576753844573,404,0.169529509155658,0.334151176848421,405,0.120061915042427,0.238386871748892,406,0.0702942286686256,0.140240683827072,407,0.020350843331683,0.0406932573498649,408,-0.029643408515078,-0.0592607627033863,409,-0.0795635672785401,-0.158622668804709,410,-0.129284858559711,-0.256399669633018,411,-0.178683005024735,-0.351614809716816,412,-0.227634537033503,-0.443316730850321,413,-0.276017101249467,-0.530589177750204,414,-0.323709766459235,-0.61256015297547,415,-0.370593325837641,-0.68841062963767,416,-0.416550594902727,-0.757382734846831,417,-0.461466704415909,-0.818787322126844,418,-0.505229387495269,-0.872010857139274,419,-0.547729260224268,-0.916521547915634,420,-0.588860095054592,-0.951874658346965,421,-0.628519086319688,-0.977716951840021,422,-0.666607107195395,-0.993790220740546,423,-0.703028957465386,-0.999933866258804,424,-0.737693601472117,-0.996086503119594,425,-0.770514395658569,-0.982286572903635,426,-0.801409305132014,-0.958671959951993,427,-0.830301108708525,-0.925478613671331,428,-0.857117591925725,-0.883038191005419,429,-0.881791727541324,-0.831774742628598,430,-0.904261843066324,-0.772200475971607,431,-0.924471774914122,-0.704910637414248,432,-0.942371008780226,-0.630577564780328,433,-0.957914805901716,-0.549943969560348,434,-0.971064314880838,-0.463815515983827,435,-0.981786668793277,-0.373052771088622,436,-0.990055067338345,-0.27856260621955,437,-0.995848843825779,-0.181289135869695,438,-0.999153516831702,-0.0822042844004434,439,-0.999960826394637,0.0177019251054136,440,-0.998268754661117,0.117431262827096,441,-0.994081530929262,0.215987266188224,442,-0.987409621077737,0.312385196181491,443,-0.978269701406507,0.405661876555336,444,-0.966684616954773,0.494885317552628,445,-0.952683324400268,0.579164028044271,446,-0.936300819682647,0.657655923013869,447,-0.917578050531861,0.729576737392853,448,-0.896561814120155,0.794207862177819,449,-0.873304640093516,0.850903524534118,450,-0.847864659274907,0.899097240144582,451,-0.820305458367489,0.938307473333554,452,-0.790695921020979,0.968142448412189,453,-0.75911005565839,0.988304064171637,454,-0.725626810493529,0.99859087241177,455,-0.690329876201572,0.998900090745021,456,-0.653307476735961,0.989228629564017,457,-0.61465214881447,0.969673122911921,458,-0.57446051062559,0.940428962947006,459,-0.532833020333398,0.901788347648809,460,-0.489873724984444,0.854137361272501,461,-0.445690000444333,0.797952116722631,462,-0.40039228301398,0.733793998390374,463,-0.354093793396359,0.662304052986243,464,-0.30691025370373,0.584196584413286,465,-0.258959598212611,0.500252016678587,466,-0.210361678589513,0.411309096154567,467,-0.161237964324189,0.318256511102488,468,-0.111711239119159,0.222024012193082,469,-0.0619052939944205,0.123573122745224,470,-0.0119446178743496,0.0238875315027389,471,0.0380459135697705,-0.0760367360583536,472,0.0879413500438914,-0.175201269687147,473,0.137616978941876,-0.272615250143074,474,0.186948637062043,-0.367305349134191,475,0.235813020950523,-0.458325454491766,476,0.284087995095673,-0.544766123410311,477,0.331652897203249,-0.625763669299474,478,0.378388839789311,-0.700508791454969,479,0.424179007336997,-0.768254661323667,480,0.468908948274497,-0.828324384567645,481,0.512466861044371,-0.880117764368662,482,0.554743873549213,-0.923117298396357,483,0.595634315275209,-0.956893349520488,484,0.635035981413371,-0.981108438603097,485,0.672850388318347,-0.995520616478515,486,0.708983019666234,-0.999985881429444,487,0.743343562696173,-0.994459618004515,488,0.775846133945218,-0.97899704280113,489,0.806409493912255,-0.953752652759472,490,0.834957250114457,-0.918978681480152,491,0.861418048028703,-0.875022578989447,492,0.885725749440722,-0.822323540133491,493,0.907819597756195,-0.761408116288541,494,0.927644369860585,-0.692884954233696,495,0.945150514148171,-0.617438714753462,496,0.96029427437526,-0.535823231733515,497,0.973037799027999,-0.448853980101705,498,0.98334923593146,-0.357399927872111,499,0.991202811863474,-0.262374853703929,500,0.991202811863474,-0.262374853703929,500]}],"start":0,"stop":520,"value":0,"interval":0.05,"rate":50,"components":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"buttonLabels":["Reverse","Play","Slower","Faster","Reset","Slider","Label"],"pause":"Pause","loop":true,"step":1,"labels":null,"precision":3,"reinit":null,"sceneId":"rgl91526","respondTo":null}],"widgetType":"rglPlayer","elementId":"rgl-play48872","html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl-play48872\" class=\"rglPlayer cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl91526","widget456614735"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl91526\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget456614735\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="rglmouse">
<code>rglMouse</code><a class="anchor" aria-label="anchor" href="#rglmouse"></a>
</h3>
<p>While not exactly a control in the sense of the other functions in
this section, the
<a name="rglMouse"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/rglMouse.html"><code>rglMouse</code></a>
function is used to add an HTML control to a display to allow the user
to select the mouse mode.</p>
<p>For example, the display below initially allows selection of
particular points, but the mouse mode may be changed to let the user
rotate the display for a another view of the scene.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This example requires the crosstalk package</span></span>
<span><span class="co"># We skip it if crosstalk is not available. </span></span>
<span></span>
<span><span class="va">ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fu"><a href="../reference/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>                  type<span class="op">=</span><span class="st">"s"</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/par3d.html">par3d</a></span><span class="op">(</span>mouseMode <span class="op">=</span> <span class="st">"selecting"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span>shared <span class="op">=</span> <span class="fu"><a href="../reference/rglShared.html">rglShared</a></span><span class="op">(</span><span class="va">ids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span> </span>
<span><span class="fu"><a href="../reference/rglMouse.html">rglMouse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2514ce28ae593bde0f73" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-2514ce28ae593bde0f73">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"79":{"id":79,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[0.21120685338974]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"81":{"id":81,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["Sepal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"82":{"id":82,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["Sepal.Width"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"83":{"id":83,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["Petal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"80":{"id":80,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"14","colors":"15","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"selecting","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6937484741211],"modelMatrix":[[1.17337727546692,0,0,-7.15760183334351],[0,0.601978063583374,0.672776162624359,-4.58379554748535],[0,-1.65392100811005,0.244870513677597,-15.3684396743774],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370301246643,-70.9936904907227],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337727546692,1.76006603240967,0.715953469276428],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.12000131607056,8.07999897003174,1.88000059127808,4.51999950408936,0.704999208450317,7.19500064849854],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,80,79,81,82,83,11],"subscenes":[],"flags":34067},"96":{"id":96,"type":"linestrip","material":{"alpha":0.498039215803146,"lit":false,"depth_test":"always","isTransparent":true},"vertices":"16","colors":"17","centers":"18","ignoreExtent":false,"flags":49248}},"crosstalk":{"key":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"]],"group":"SharedDataf30d7598","id":79,"options":[{"deselectedFade":0.1,"deselectedColor":null,"selectedColor":null,"selectedIgnoreNone":true,"filteredFade":0,"filteredColor":null}]},"width":480,"height":296.662546353523,"brushId":96,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":150,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":16,"componentType":5126,"count":5,"type":"VEC3"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":18,"componentType":5126,"count":5,"type":"VEC3"}],"bufferViews":[{"buffer":0,"byteLength":1800,"byteOffset":0},{"buffer":0,"byteLength":600,"byteOffset":1800},{"buffer":0,"byteLength":1800,"byteOffset":2400},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":4,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4288},{"buffer":0,"byteLength":204,"byteOffset":4292},{"buffer":0,"byteLength":4,"byteOffset":4496},{"buffer":0,"byteLength":60,"byteOffset":4500},{"buffer":0,"byteLength":16,"byteOffset":4560},{"buffer":0,"byteLength":60,"byteOffset":4576}],"buffers":[{"byteLength":4636,"bytes":"MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3MTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZm\nZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/AACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/\nzcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAA\nQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/zcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/\nZma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZm\nZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/AACgQAAAQEDNzMw/AACgQJqZWUDNzMw/\nZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3MTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZ\nWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/zcycQGZmRkAAAMA/AACgQM3MTECamZk/\nAACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAAQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAA\nYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/AACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/\nmpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3MTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMz\nU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBAzczcQGZmRkDNzJxAAACwQDMzE0AAAIBA\nAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMzU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZ\nOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBAzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBA\nMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZmRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3M\nLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlAzcy8QM3MTECamZlAMzPDQDMzM0AAAIBA\nmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMz\nM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBAZma2QGZmJkAAAGBAAACwQJqZGUAzM3NA\nAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3MLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZ\nWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxAMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBA\nAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZmJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3M\nLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZAZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBA\nZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3MLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZ\nOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NAzcycQAAAIEAAAJBAmpnpQJqZOUCamclA\nZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3MTEAzM6NAzczMQM3MLECamalAmpnZQAAA\nQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NAzczMQM3MTECamalAAADQQAAAQEAAALBA\nZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3MDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMz\nM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxAZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBA\nZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMzM0AzM7NAZmbmQAAAQECamblAzczsQDMz\nM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NAmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NA\nZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZmRkAAALBAAADAQAAAQECamZlAzczcQGZm\nRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NAmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxA\nZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAAIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZ\nWUDNzKxAzcy8QAAAQEAzM6NAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP/fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3M\nTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZmZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/\nAACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/zcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZ\nWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAAQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/\nzcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/Zma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZ\nWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZmZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/\nAACgQAAAQEDNzMw/AACgQJqZWUDNzMw/ZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3M\nTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/\nzcycQGZmRkAAAMA/AACgQM3MTECamZk/AACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAA\nQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAAYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/\nAACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/mpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3M\nTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMzU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBA\nzczcQGZmRkDNzJxAAACwQDMzE0AAAIBAAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMz\nU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBA\nzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBAMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZm\nRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3MLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlA\nzcy8QM3MTECamZlAMzPDQDMzM0AAAIBAmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZ\nOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMzM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBA\nZma2QGZmJkAAAGBAAACwQJqZGUAzM3NAAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3M\nLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxA\nMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBAAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZm\nJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3MLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZA\nZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBAZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/AQEBAQAAAAAAAKBAAADAfwAAwH8AAMBAAADAfwAAwH8AAOBA\nAADAfwAAwH8AAABBAADAfwAAwH8AAMB/AAAAQAAAwH8AAMB/AAAgQAAAwH8AAMB/AABAQAAA\nwH8AAMB/AABgQAAAwH8AAMB/AACAQAAAwH8AAMB/AACQQAAAwH8AAMB/AADAfwAAgD8AAMB/\nAADAfwAAAEAAAMB/AADAfwAAQEAAAMB/AADAfwAAgEAAAMB/AADAfwAAoEAAAMB/AADAfwAA\nwEAAAMB/AADAfwAA4EAAAAABAAAAAAAAAAB3vn+/AACAPwAAAAB3vn+/AACAPwAAgD93vn+/\nAAAAAAAAgD93vn+/AAAAAAAAAAB3vn+/AAAAAAAAAAAAAAAA//7+PgAAAAAAAAAAd75/vwAA\ngD8AAAAAd75/vwAAgD8AAIA/d75/vwAAAAAAAIA/d75/vwAAAAAAAAAAd75/vw=="}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"<select onchange=\"document.getElementById(this.attributes.rglSceneId.value).rglinstance.&#10;                   setMouseMode(this.value, &#10;                                button = parseInt(this.attributes.rglButton.value), &#10;                                subscene = parseInt(this.attributes.rglSubscene.value),&#10;                                stayActive = parseInt(this.attributes.rglStayActive.value))\" rglButton=\"1\" rglSubscene=\"7\" rglStayActive=\"0\" rglSceneId=\"rgl54317\">\n  <option value=\"trackball\">trackball<\/option>\n  <option value=\"selecting\" selected>selecting<\/option>\n  <option value=\"xAxis\">xAxis<\/option>\n  <option value=\"yAxis\">yAxis<\/option>\n  <option value=\"zAxis\">zAxis<\/option>\n  <option value=\"polar\">polar<\/option>\n  <option value=\"zoom\">zoom<\/option>\n  <option value=\"fov\">fov<\/option>\n  <option value=\"none\">none<\/option>\n<\/select>"],"widgetType":["rglWebGL","html"],"elementId":["rgl54317","widget102924682"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl54317\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:40;-webkit-flex:40\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget102924682\" class=\" cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":null},"evals":[],"jsHooks":[]}</script><p>The <code><a href="../reference/rglShared.html">rglShared()</a></code> call used here is described
<a href="#rglShared">below</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="layout-of-the-display">Layout of the display<a class="anchor" aria-label="anchor" href="#layout-of-the-display"></a>
</h2>
<p>Many <code>rgl</code> displays will contain several elements: one or
more <code>rgl</code> scenes and controls. Internally <code>rgl</code>
uses the <code>combineWidgets</code> function from the <a href="https://github.com/rte-antares-rpackage/manipulateWidget" class="external-link"><code>manipulateWidget</code></a>
package.</p>
<p>The <code>rgl</code> package provides 3 convenience functions for
arranging displays. We have already met the first: the
<code>magrittr</code> pipe, <code>%&gt;%</code>. When the display is
constructed as a single object using pipes, the objects in the pipeline
will be arranged in a single column.</p>
<p>The second convenience function is
<a name="asRow"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/asRow.html"><code>asRow</code></a>.
This takes as input a list of objects or a <code>combineWidgets</code>
object (perhaps the result of a pipe), and rearranges (some of) them
into a horizontal row. As in the <a href="#toggleWidget">toggleWidget
example</a>, the <code>last</code> argument can be used to limit the
actions of <code>asRow</code> to the specified number of components. (If
<code>last = 0</code>, all objects are stacked: this can be useful if
some of them are not from the <code>rgl</code> package, so piping
doesn’t work for them.)</p>
<p>Finally,
<a name="getWidgetId"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/asRow.html"><code>getWidgetId</code></a>
can be used to extract the HTML element ID from an HTML widget. This is
useful when combining widgets that are not all elements of the same
pipe, as in the <code>crosstalk</code> example below.</p>
<p>If these convenience functions are not sufficient, you can call
<a href="https://rdrr.io/pkg/manipulateWidget/man/combineWidgets.html" class="external-link">manipulateWidget::combineWidgets</a>
or other functions from <code>manipulateWidget</code> for more
flexibility in the display arrangements.</p>
</div>
<div class="section level2">
<h2 id="integration-with-crosstalk">Integration with <code>crosstalk</code><a class="anchor" aria-label="anchor" href="#integration-with-crosstalk"></a>
</h2>
<p>The <a href="https://rstudio.github.io/crosstalk/" class="external-link"><code>crosstalk</code></a>
package allows widgets to communicate with each other. Currently it
supports selection and filtering of observations.</p>
<p><code>rgl</code> can send, receive and display these messages. An
<code>rgl</code> display may have several subscenes, each displaying
different datasets. Each object in the scene is potentially a shared
dataset in the <code>crosstalk</code> sense.</p>
<p>The linking depends on the
<a name="rglShared"></a><a href="https://dmurdoch.github.io/rgl/dev/reference/rglShared.html"><code>rglShared</code></a>
function. Calling <code>rglShared(id)</code>, where <code>id</code> is
the <code>rgl</code> id value for an object in the current scene,
creates a shared data object containing the coordinates of the vertices
of the <code>rgl</code> object. This object is passed to
<a href="#rglwidget"><code>rglwidget</code></a> in the
<code>shared</code> argument. It can also be passed to other widgets
that accept shared data, linking the two displays.</p>
<p>If a shared data object has been created in some other way, it can be
linked to a particular <code>rgl</code> <code>id</code> value by copying
its <code>key</code> and <code>group</code> properties as shown in the
example below.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This example requires the crosstalk package.  </span></span>
<span><span class="co"># We skip it if crosstalk is not available. </span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/crosstalk/" class="external-link">crosstalk</a></span><span class="op">)</span></span>
<span><span class="va">sd</span> <span class="op">&lt;-</span> <span class="va"><a href="https://rdrr.io/pkg/crosstalk/man/SharedData.html" class="external-link">SharedData</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="va">ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">sd</span><span class="op">$</span><span class="fu">origData</span><span class="op">(</span><span class="op">)</span>, col <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>, type <span class="op">=</span> <span class="st">"s"</span><span class="op">)</span></span>
<span><span class="co"># Copy the key and group from existing shared data</span></span>
<span><span class="va">rglsd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rglShared.html">rglShared</a></span><span class="op">(</span><span class="va">ids</span><span class="op">[</span><span class="st">"data"</span><span class="op">]</span>, key <span class="op">=</span> <span class="va">sd</span><span class="op">$</span><span class="fu">key</span><span class="op">(</span><span class="op">)</span>, group <span class="op">=</span> <span class="va">sd</span><span class="op">$</span><span class="fu">groupName</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span>shared <span class="op">=</span> <span class="va">rglsd</span><span class="op">)</span> <span class="op"><a href="../reference/import.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/asRow.html">asRow</a></span><span class="op">(</span><span class="st">"Mouse mode: "</span>, <span class="fu"><a href="../reference/rglMouse.html">rglMouse</a></span><span class="op">(</span><span class="fu"><a href="../reference/asRow.html">getWidgetId</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span>, </span>
<span>      <span class="st">"Subset: "</span>, <span class="fu"><a href="https://rdrr.io/pkg/crosstalk/man/filter_select.html" class="external-link">filter_checkbox</a></span><span class="op">(</span><span class="st">"cylinderselector"</span>, </span>
<span>                        <span class="st">"Cylinders"</span>, <span class="va">sd</span>, <span class="op">~</span> <span class="va">cyl</span>, inline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      last <span class="op">=</span> <span class="fl">4</span>, colsize <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, height <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span></code></pre></div>
<div class="combineWidgets html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5d05eac75555269eefd0" style="width:480px;height:296.662546353523px;"></div>
<script type="application/json" data-for="htmlwidget-5d05eac75555269eefd0">{"x":{"data":[{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"97":{"id":97,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[11.5934267044067]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"99":{"id":99,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["mpg"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"100":{"id":100,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["cyl"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"101":{"id":101,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["disp"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"98":{"id":98,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"14","colors":"15","axes":{"mode":["pretty","pretty","pretty"],"step":[5,1,100],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"selecting","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,1080.93225097656],"modelMatrix":[[9.8662748336792,0,0,-218.538009643555],[0,19.8219242095947,0.543490171432495,-266.516296386719],[0,-54.4602890014648,0.197814255952835,-807.886962890625],[0,0,0,1]],"projMatrix":[[3.73205065727234,0,0,0],[0,3.73205065727234,0,0],[0,0,-3.86370348930359,-3896.63598632812],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[9.8662748336792,57.9554290771484,0.578370153903961],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[9.22494316101074,35.0750579833984,3.79995965957642,8.20004081726074,51.055004119873,492.044982910156],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":null,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,98,97,99,100,101,11],"subscenes":[],"flags":34067},"114":{"id":114,"type":"linestrip","material":{"alpha":0.498039215803146,"lit":false,"depth_test":"always","isTransparent":true},"vertices":"16","colors":"17","centers":"18","ignoreExtent":false,"flags":49248}},"crosstalk":{"key":[["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"]],"group":"SharedData5affc4f2","id":97,"options":[{"deselectedFade":0.1,"deselectedColor":null,"selectedColor":null,"selectedIgnoreNone":true,"filteredFade":0,"filteredColor":null}]},"width":480,"height":296.662546353523,"brushId":114,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":32,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":32,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":32,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5126,"count":15,"type":"VEC3"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":16,"componentType":5126,"count":5,"type":"VEC3"},{"bufferView":17,"componentType":5126,"count":1,"type":"VEC4"},{"bufferView":18,"componentType":5126,"count":5,"type":"VEC3"}],"bufferViews":[{"buffer":0,"byteLength":384,"byteOffset":0},{"buffer":0,"byteLength":128,"byteOffset":384},{"buffer":0,"byteLength":384,"byteOffset":512},{"buffer":0,"byteLength":12,"byteOffset":896},{"buffer":0,"byteLength":4,"byteOffset":908},{"buffer":0,"byteLength":12,"byteOffset":912},{"buffer":0,"byteLength":12,"byteOffset":924},{"buffer":0,"byteLength":4,"byteOffset":936},{"buffer":0,"byteLength":12,"byteOffset":940},{"buffer":0,"byteLength":12,"byteOffset":952},{"buffer":0,"byteLength":4,"byteOffset":964},{"buffer":0,"byteLength":12,"byteOffset":968},{"buffer":0,"byteLength":4,"byteOffset":980},{"buffer":0,"byteLength":3,"byteOffset":984},{"buffer":0,"byteLength":180,"byteOffset":988},{"buffer":0,"byteLength":4,"byteOffset":1168},{"buffer":0,"byteLength":60,"byteOffset":1172},{"buffer":0,"byteLength":16,"byteOffset":1232},{"buffer":0,"byteLength":60,"byteOffset":1248}],"buffers":[{"byteLength":1308,"bytes":"AACoQQAAwEAAACBDAACoQQAAwEAAACBDZma2QQAAgEAAANhCMzOrQQAAwEAAAIFDmpmVQQAA\nAEEAALRDzcyQQQAAwEAAAGFDzcxkQQAAAEEAALRDMzPDQQAAgEAzsxJDZma2QQAAgEDNzAxD\nmpmZQQAAwECamSdDZmaOQQAAwECamSdDMzODQQAAAEFm5olDZmaKQQAAAEFm5olDMzNzQQAA\nAEFm5olDZmYmQQAAAEEAAOxDZmYmQQAAAEEAAOZDMzNrQQAAAEEAANxDmpkBQgAAgEBmZp1C\nMzPzQQAAgEBmZpdCmpkHQgAAgEAzM45CAACsQQAAgEAzM/BCAAB4QQAAAEEAAJ9DMzNzQQAA\nAEEAAJhDzcxUQQAAAEEAAK9DmpmZQQAAAEEAAMhDZmbaQQAAgEAAAJ5CAADQQQAAgECamfBC\nMzPzQQAAgEAzM75Czcx8QQAAAEEAgK9DmpmdQQAAwEAAABFDAABwQQAAAEEAgJZDMzOrQQAA\ngEAAAPJCzQu8/80LvP8il+b/zQu8/56env/NC7z/np6e/yKX5v8il+b/zQu8/80LvP+enp7/\nnp6e/56env+enp7/np6e/56env8il+b/Ipfm/yKX5v8il+b/np6e/56env+enp7/np6e/yKX\n5v8il+b/Ipfm/56env/NC7z/np6e/yKX5v8AAKhBAADAQAAAIEMAAKhBAADAQAAAIENmZrZB\nAACAQAAA2EIzM6tBAADAQAAAgUOamZVBAAAAQQAAtEPNzJBBAADAQAAAYUPNzGRBAAAAQQAA\ntEMzM8NBAACAQDOzEkNmZrZBAACAQM3MDEOamZlBAADAQJqZJ0NmZo5BAADAQJqZJ0MzM4NB\nAAAAQWbmiUNmZopBAAAAQWbmiUMzM3NBAAAAQWbmiUNmZiZBAAAAQQAA7ENmZiZBAAAAQQAA\n5kMzM2tBAAAAQQAA3EOamQFCAACAQGZmnUIzM/NBAACAQGZml0KamQdCAACAQDMzjkIAAKxB\nAACAQDMz8EIAAHhBAAAAQQAAn0MzM3NBAAAAQQAAmEPNzFRBAAAAQQAAr0OamZlBAAAAQQAA\nyENmZtpBAACAQAAAnkIAANBBAACAQJqZ8EIzM/NBAACAQDMzvkLNzHxBAAAAQQCAr0OamZ1B\nAADAQAAAEUMAAHBBAAAAQQCAlkMzM6tBAACAQAAA8kIAAMB/AACAQAAAgD8AAAABAADAfwAA\ngEAAAIA/AADAfwAAgEAAAIA/AAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/\nAACAQAAAgD8BAQEBAAAAAAAAIEEAAMB/AADAfwAAcEEAAMB/AADAfwAAoEEAAMB/AADAfwAA\nyEEAAMB/AADAfwAA8EEAAMB/AADAfwAADEIAAMB/AADAfwAAwH8AAIBAAADAfwAAwH8AAKBA\nAADAfwAAwH8AAMBAAADAfwAAwH8AAOBAAADAfwAAwH8AAABBAADAfwAAwH8AAMB/AADIQgAA\nwH8AAMB/AABIQwAAwH8AAMB/AACWQwAAwH8AAMB/AADIQwAAAAEAAAAAAAAAAHe+f78AAIA/\nAAAAAHe+f78AAIA/AACAP3e+f78AAAAAAACAP3e+f78AAAAAAAAAAHe+f78AAAAAAAAAAAAA\nAAD//v4+AAAAAAAAAAB3vn+/AACAPwAAAAB3vn+/AACAPwAAgD93vn+/AAAAAAAAgD93vn+/\nAAAAAAAAAAB3vn+/"}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":[],"webGLoptions":{"preserveDrawingBuffer":true}},{"data":["Mouse mode: ","<select onchange=\"document.getElementById(this.attributes.rglSceneId.value).rglinstance.&#10;                   setMouseMode(this.value, &#10;                                button = parseInt(this.attributes.rglButton.value), &#10;                                subscene = parseInt(this.attributes.rglSubscene.value),&#10;                                stayActive = parseInt(this.attributes.rglStayActive.value))\" rglButton=\"1\" rglSubscene=\"7\" rglStayActive=\"0\" rglSceneId=\"rgl8459\">\n  <option value=\"trackball\">trackball<\/option>\n  <option value=\"selecting\" selected>selecting<\/option>\n  <option value=\"xAxis\">xAxis<\/option>\n  <option value=\"yAxis\">yAxis<\/option>\n  <option value=\"zAxis\">zAxis<\/option>\n  <option value=\"polar\">polar<\/option>\n  <option value=\"zoom\">zoom<\/option>\n  <option value=\"fov\">fov<\/option>\n  <option value=\"none\">none<\/option>\n<\/select>","Subset: ","<div id=\"cylinderselector\" class=\"form-group crosstalk-input-checkboxgroup crosstalk-input\">\n  <label class=\"control-label\" for=\"cylinderselector\">Cylinders<\/label>\n  <div class=\"crosstalk-options-group\">\n    <label class=\"checkbox-inline\">\n      <input type=\"checkbox\" name=\"cylinderselector\" value=\"4\"/>\n      <span>4<\/span>\n    <\/label>\n    <label class=\"checkbox-inline\">\n      <input type=\"checkbox\" name=\"cylinderselector\" value=\"6\"/>\n      <span>6<\/span>\n    <\/label>\n    <label class=\"checkbox-inline\">\n      <input type=\"checkbox\" name=\"cylinderselector\" value=\"8\"/>\n      <span>8<\/span>\n    <\/label>\n  <\/div>\n  <script type=\"application/json\" data-for=\"cylinderselector\">{\n  \"map\": {\n    \"4\": [\"Datsun 710\", \"Merc 240D\", \"Merc 230\", \"Fiat 128\", \"Honda Civic\", \"Toyota Corolla\", \"Toyota Corona\", \"Fiat X1-9\", \"Porsche 914-2\", \"Lotus Europa\", \"Volvo 142E\"],\n    \"6\": [\"Mazda RX4\", \"Mazda RX4 Wag\", \"Hornet 4 Drive\", \"Valiant\", \"Merc 280\", \"Merc 280C\", \"Ferrari Dino\"],\n    \"8\": [\"Hornet Sportabout\", \"Duster 360\", \"Merc 450SE\", \"Merc 450SL\", \"Merc 450SLC\", \"Cadillac Fleetwood\", \"Lincoln Continental\", \"Chrysler Imperial\", \"Dodge Challenger\", \"AMC Javelin\", \"Camaro Z28\", \"Pontiac Firebird\", \"Ford Pantera L\", \"Maserati Bora\"]\n  },\n  \"group\": [\"SharedData5affc4f2\"]\n}<\/script>\n<\/div>"],"widgetType":["html","html","html","html"],"elementId":["widget954503649","widget889539316","widget692803406","widget640506813"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget954503649\" class=\" cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:2;-webkit-flex:2\">\n              <div id=\"widget889539316\" class=\" cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget692803406\" class=\" cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><div class=\"cw-col\" style=\"flex:2;-webkit-flex:2\">\n              <div id=\"widget640506813\" class=\" cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":true}],"widgetType":["rglWebGL","combineWidgets"],"elementId":["rgl8459","widget994269776"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:296.662546353523;-webkit-flex:296.662546353523\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"rgl8459\" class=\"rglWebGL cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><div class=\"cw-row cw-by-row\" style=\"flex:60;-webkit-flex:60\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n              <div id=\"widget994269776\" class=\"combineWidgets cw-widget html-widget-static-bound\" style=\"width:100%;height:100%\"><\/div>\n              <\/div><\/div><\/div><\/div><\/div>","hasCrosstalkInputs":false},"evals":[],"jsHooks":[]}</script><p>If multiple objects in the <code>rgl</code> scene need to be
considered as shared data, you can pass the results of several
<code><a href="../reference/rglShared.html">rglShared()</a></code> calls in a list,
i.e. <code>rglwidget(shared = &lt;list&gt;)</code>. The key values will
be assumed to be shared across datasets; if this is not wanted, use a
prefix or some other means to make sure they differ between objects.</p>
<p>If the same <code>rgl</code> id is used in more than one
<code><a href="../reference/rglShared.html">rglShared()</a></code> object, it will respond to messages from all of
them. This may lead to undesirable behaviour as one message cancels the
previous one.</p>
</div>
<div class="section level2">
<h2 id="low-level-controls">Low level controls<a class="anchor" aria-label="anchor" href="#low-level-controls"></a>
</h2>
<p>We repeat the initial plot from this document:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plotids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fu"><a href="../reference/plot3d.html">plot3d</a></span><span class="op">(</span><span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="va">Petal.Length</span>, </span>
<span>                  type<span class="op">=</span><span class="st">"s"</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">subid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/subscene3d.html">currentSubscene3d</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/rglwidget.html">rglwidget</a></span><span class="op">(</span>elementId<span class="op">=</span><span class="st">"plot3drgl2"</span><span class="op">)</span></span></code></pre></div>
<div id="plot3drgl2" style="width:480px;height:296.662546353523px;" class="rglWebGL html-widget "></div>
<script type="application/json" data-for="plot3drgl2">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false,"tag":"","blend":["src_alpha","one_minus_src_alpha"]},"rootSubscene":7,"objects":{"115":{"id":115,"type":"spheres","material":{},"vertices":"0","colors":"1","radii":[[0.21120685338974]],"centers":"2","ignoreExtent":false,"fastTransparency":true,"flags":32771},"117":{"id":117,"type":"text","material":{"lit":false,"margin":0,"floating":true,"edge":[0,1,1]},"vertices":"3","colors":"4","texts":[["Sepal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"5","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"118":{"id":118,"type":"text","material":{"lit":false,"margin":1,"floating":true,"edge":[1,1,1]},"vertices":"6","colors":"7","texts":[["Sepal.Width"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"8","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"119":{"id":119,"type":"text","material":{"lit":false,"margin":2,"floating":true,"edge":[1,1,1]},"vertices":"9","colors":"10","texts":[["Petal.Length"]],"cex":[[1]],"adj":[[0.5,0.5,0.5]],"centers":"11","family":[["sans"]],"font":[[1]],"ignoreExtent":true,"flags":33808},"11":{"id":11,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"12":{"id":12,"type":"background","material":{"lit":false,"back":"lines"},"colors":"12","centers":"13","sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"116":{"id":116,"type":"bboxdeco","material":{"front":"lines","back":"lines"},"vertices":"14","colors":"15","axes":{"mode":["pretty","pretty","pretty"],"step":[1,0.5,1],"nticks":[5,5,5],"marklen":[15,15,15],"expand":[1.02999997138977,1.02999997138977,1.02999997138977]},"draw_front":true,"flags":32769},"7":{"id":7,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":7,"mouseMode":{"none":"none","left":"selecting","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,19.6937484741211],"modelMatrix":[[1.17337667942047,0,0,-7.15759754180908],[0,0.601978063583374,0.672776341438293,-4.58379650115967],[0,-1.65392100811005,0.244870573282242,-15.3684406280518],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370301246643,-70.9936904907227],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1.17337667942047,1.76006603240967,0.715953648090363],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[4.1200008392334,8.07999897003174,1.88000059127808,4.51999950408936,0.704999268054962,7.19500064849854],"windowRect":[0,0,256,256],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"NULL","maxClipPlanes":2147483647,"glVersion":"NA","activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[12,116,115,117,118,119,11],"subscenes":[],"flags":34067}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":296.662546353523,"buffer":{"accessors":[{"bufferView":0,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":1,"componentType":5121,"count":150,"type":"VEC4","normalized":true},{"bufferView":2,"componentType":5126,"count":150,"type":"VEC3"},{"bufferView":3,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":4,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":5,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":6,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":7,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":8,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":9,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":10,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":11,"componentType":5126,"count":1,"type":"VEC3"},{"bufferView":12,"componentType":5121,"count":1,"type":"VEC4"},{"bufferView":13,"componentType":5121,"count":1,"type":"VEC3"},{"bufferView":14,"componentType":5126,"count":17,"type":"VEC3"},{"bufferView":15,"componentType":5121,"count":1,"type":"VEC4"}],"bufferViews":[{"buffer":0,"byteLength":1800,"byteOffset":0},{"buffer":0,"byteLength":600,"byteOffset":1800},{"buffer":0,"byteLength":1800,"byteOffset":2400},{"buffer":0,"byteLength":12,"byteOffset":4200},{"buffer":0,"byteLength":4,"byteOffset":4212},{"buffer":0,"byteLength":12,"byteOffset":4216},{"buffer":0,"byteLength":12,"byteOffset":4228},{"buffer":0,"byteLength":4,"byteOffset":4240},{"buffer":0,"byteLength":12,"byteOffset":4244},{"buffer":0,"byteLength":12,"byteOffset":4256},{"buffer":0,"byteLength":4,"byteOffset":4268},{"buffer":0,"byteLength":12,"byteOffset":4272},{"buffer":0,"byteLength":4,"byteOffset":4284},{"buffer":0,"byteLength":3,"byteOffset":4288},{"buffer":0,"byteLength":204,"byteOffset":4292},{"buffer":0,"byteLength":4,"byteOffset":4496}],"buffers":[{"byteLength":4500,"bytes":"MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3MTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZm\nZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/AACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/\nzcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAA\nQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/zcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/\nZma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZm\nZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/AACgQAAAQEDNzMw/AACgQJqZWUDNzMw/\nZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3MTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZ\nWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/zcycQGZmRkAAAMA/AACgQM3MTECamZk/\nAACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAAQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAA\nYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/AACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/\nmpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3MTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMz\nU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBAzczcQGZmRkDNzJxAAACwQDMzE0AAAIBA\nAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMzU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZ\nOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBAzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBA\nMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZmRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3M\nLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlAzcy8QM3MTECamZlAMzPDQDMzM0AAAIBA\nmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMz\nM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBAZma2QGZmJkAAAGBAAACwQJqZGUAzM3NA\nAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3MLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZ\nWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxAMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBA\nAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZmJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3M\nLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZAZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBA\nZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3MLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZ\nOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NAzcycQAAAIEAAAJBAmpnpQJqZOUCamclA\nZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3MTEAzM6NAzczMQM3MLECamalAmpnZQAAA\nQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NAzczMQM3MTECamalAAADQQAAAQEAAALBA\nZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3MDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMz\nM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxAZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBA\nZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMzM0AzM7NAZmbmQAAAQECamblAzczsQDMz\nM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NAmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NA\nZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZmRkAAALBAAADAQAAAQECamZlAzczcQGZm\nRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NAmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxA\nZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAAIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZ\nWUDNzKxAzcy8QAAAQEAzM6NAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/\nAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAA\nAP/fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99T\na//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/\n31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/99Ta//fU2v/31Nr/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQ\nT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//YdBP/2HQT/9h0E//\nYdBP/2HQT/9h0E//YdBP/2HQT/9h0E//MzOjQAAAYEAzM7M/zcycQAAAQEAzM7M/ZmaWQM3M\nTEBmZqY/MzOTQGZmRkAAAMA/AACgQGZmZkAzM7M/zcysQJqZeUCamdk/MzOTQJqZWUAzM7M/\nAACgQJqZWUAAAMA/zcyMQJqZOUAzM7M/zcycQGZmRkAAAMA/zcysQM3MbEAAAMA/mpmZQJqZ\nWUDNzMw/mpmZQAAAQEAzM7M/mpmJQAAAQEDNzIw/mpm5QAAAgECamZk/Zma2QM3MjEAAAMA/\nzcysQJqZeUBmZqY/MzOjQAAAYEAzM7M/Zma2QDMzc0Camdk/MzOjQDMzc0AAAMA/zcysQJqZ\nWUCamdk/MzOjQM3MbEAAAMA/MzOTQGZmZkAAAIA/MzOjQDMzU0Camdk/mpmZQJqZWUAzM/M/\nAACgQAAAQEDNzMw/AACgQJqZWUDNzMw/ZmamQAAAYEAAAMA/ZmamQJqZWUAzM7M/ZmaWQM3M\nTEDNzMw/mpmZQGZmRkDNzMw/zcysQJqZWUAAAMA/ZmamQDMzg0AAAMA/AACwQGZmhkAzM7M/\nzcycQGZmRkAAAMA/AACgQM3MTECamZk/AACwQAAAYEBmZqY/zcycQGZmZkAzM7M/zcyMQAAA\nQEBmZqY/MzOjQJqZWUAAAMA/AACgQAAAYEBmZqY/AACQQDMzE0BmZqY/zcyMQM3MTEBmZqY/\nAACgQAAAYEDNzMw/MzOjQDMzc0AzM/M/mpmZQAAAQEAzM7M/MzOjQDMzc0DNzMw/MzOTQM3M\nTEAzM7M/mpmpQM3MbEAAAMA/AACgQDMzU0AzM7M/AADgQM3MTEBmZpZAzczMQM3MTEAAAJBA\nzczcQGZmRkDNzJxAAACwQDMzE0AAAIBAAADQQDMzM0AzM5NAZma2QDMzM0AAAJBAmpnJQDMz\nU0BmZpZAzcycQJqZGUAzM1NAMzPTQJqZOUAzM5NAZmamQM3MLECamXlAAACgQAAAAEAAAGBA\nzcy8QAAAQEBmZoZAAADAQM3MDEAAAIBAMzPDQJqZOUBmZpZAMzOzQJqZOUBmZmZAZmbWQGZm\nRkDNzIxAMzOzQAAAQEAAAJBAmpm5QM3MLEAzM4NAZmbGQM3MDEAAAJBAMzOzQAAAIECamXlA\nzcy8QM3MTECamZlAMzPDQDMzM0AAAIBAmpnJQAAAIEDNzJxAMzPDQDMzM0BmZpZAzczMQJqZ\nOUCamYlAMzPTQAAAQEDNzIxAmpnZQDMzM0CamZlAZmbWQAAAQEAAAKBAAADAQJqZOUAAAJBA\nZma2QGZmJkAAAGBAAACwQJqZGUAzM3NAAACwQJqZGUDNzGxAmpm5QM3MLECamXlAAADAQM3M\nLEAzM6NAzcysQAAAQEAAAJBAAADAQJqZWUAAAJBAZmbWQGZmRkBmZpZAmpnJQDMzE0DNzIxA\nMzOzQAAAQEAzM4NAAACwQAAAIEAAAIBAAACwQGZmJkDNzIxAMzPDQAAAQEAzM5NAmpm5QGZm\nJkAAAIBAAACgQDMzE0AzM1NAMzOzQM3MLEBmZoZAZma2QAAAQEBmZoZAZma2QJqZOUBmZoZA\nZmbGQJqZOUCamYlAMzOjQAAAIEAAAEBAZma2QDMzM0AzM4NAmpnJQDMzU0AAAMBAmpm5QM3M\nLEAzM6NAMzPjQAAAQEDNzLxAmpnJQJqZOUAzM7NAAADQQAAAQECamblAMzPzQAAAQEAzM9NA\nzcycQAAAIEAAAJBAmpnpQJqZOUCamclAZmbWQAAAIECamblAZmbmQGZmZkAzM8NAAADQQM3M\nTEAzM6NAzczMQM3MLECamalAmpnZQAAAQEAAALBAZma2QAAAIEAAAKBAmpm5QDMzM0AzM6NA\nzczMQM3MTECamalAAADQQAAAQEAAALBAZmb2QDMzc0BmZtZAZmb2QGZmJkDNzNxAAADAQM3M\nDEAAAKBAzczcQM3MTEBmZrZAMzOzQDMzM0DNzJxAZmb2QDMzM0BmZtZAmpnJQM3MLEDNzJxA\nZmbWQDMzU0BmZrZAZmbmQM3MTEAAAMBAZmbGQDMzM0CamZlAMzPDQAAAQEDNzJxAzczMQDMz\nM0AzM7NAZmbmQAAAQECamblAzczsQDMzM0AzM8NAzcz8QDMzc0DNzMxAzczMQDMzM0AzM7NA\nmpnJQDMzM0AzM6NAMzPDQGZmJkAzM7NAZmb2QAAAQEAzM8NAmpnJQJqZWUAzM7NAzczMQGZm\nRkAAALBAAADAQAAAQECamZlAzczcQGZmRkDNzKxAZmbWQGZmRkAzM7NAzczcQGZmRkAzM6NA\nmpm5QM3MLEAzM6NAmpnZQM3MTEDNzLxAZmbWQDMzU0BmZrZAZmbWQAAAQEBmZqZAmpnJQAAA\nIEAAAKBAAADQQAAAQEBmZqZAZmbGQJqZWUDNzKxAzcy8QAAAQEAzM6NAAADAfwAAgEAAAIA/\nAAAAAQAAwH8AAIBAAACAPwAAwH8AAIBAAACAPwAAAAEAAMB/AACAQAAAgD8AAMB/AACAQAAA\ngD8AAAABAADAfwAAgEAAAIA/AQEBAQAAAAAAAKBAAADAfwAAwH8AAMBAAADAfwAAwH8AAOBA\nAADAfwAAwH8AAABBAADAfwAAwH8AAMB/AAAAQAAAwH8AAMB/AAAgQAAAwH8AAMB/AABAQAAA\nwH8AAMB/AABgQAAAwH8AAMB/AACAQAAAwH8AAMB/AACQQAAAwH8AAMB/AADAfwAAgD8AAMB/\nAADAfwAAAEAAAMB/AADAfwAAQEAAAMB/AADAfwAAgEAAAMB/AADAfwAAoEAAAMB/AADAfwAA\nwEAAAMB/AADAfwAA4EAAAAAB"}]},"context":{"shiny":false,"rmarkdown":"rmarkdown::html_vignette"},"vertexShader":"#line 2 1\n// File 1 is the vertex shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\n\nattribute vec3 aPos;\nattribute vec4 aCol;\nuniform mat4 mvMatrix;\nuniform mat4 prMatrix;\nvarying vec4 vCol;\nvarying vec4 vPosition;\n\n#ifdef NEEDS_VNORMAL\nattribute vec3 aNorm;\nuniform mat4 normMatrix;\nvarying vec4 vNormal;\n#endif\n\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nattribute vec2 aTexcoord;\nvarying vec2 vTexcoord;\n#endif\n\n#ifdef FIXED_SIZE\nuniform vec3 textScale;\n#endif\n\n#ifdef FIXED_QUADS\nattribute vec3 aOfs;\n#endif\n\n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\nvarying float normz;\nuniform mat4 invPrMatrix;\n#else\nattribute vec3 aPos1;\nattribute vec3 aPos2;\nvarying float normz;\n#endif\n#endif // IS_TWOSIDED\n\n#ifdef FAT_LINES\nattribute vec3 aNext;\nattribute vec2 aPoint;\nvarying vec2 vPoint;\nvarying float vLength;\nuniform float uAspect;\nuniform float uLwd;\n#endif\n\n\nvoid main(void) {\n  \n#ifndef IS_BRUSH\n#if defined(NCLIPPLANES) || !defined(FIXED_QUADS) || defined(HAS_FOG)\n  vPosition = mvMatrix * vec4(aPos, 1.);\n#endif\n  \n#ifndef FIXED_QUADS\n  gl_Position = prMatrix * vPosition;\n#endif\n#endif // !IS_BRUSH\n  \n#ifdef IS_POINTS\n  gl_PointSize = POINTSIZE;\n#endif\n  \n  vCol = aCol;\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = normMatrix * vec4(-aNorm, dot(aNorm, aPos));\n#endif\n  \n#ifdef IS_TWOSIDED\n#ifdef HAS_NORMALS\n  /* normz should be calculated *after* projection */\n  normz = (invPrMatrix*vNormal).z;\n#else\n  vec4 pos1 = prMatrix*(mvMatrix*vec4(aPos1, 1.));\n  pos1 = pos1/pos1.w - gl_Position/gl_Position.w;\n  vec4 pos2 = prMatrix*(mvMatrix*vec4(aPos2, 1.));\n  pos2 = pos2/pos2.w - gl_Position/gl_Position.w;\n  normz = pos1.x*pos2.y - pos1.y*pos2.x;\n#endif\n#endif // IS_TWOSIDED\n  \n#ifdef NEEDS_VNORMAL\n  vNormal = vec4(normalize(vNormal.xyz/vNormal.w), 1);\n#endif\n  \n#if defined(HAS_TEXTURE) || defined(IS_TEXT)\n  vTexcoord = aTexcoord;\n#endif\n  \n#if defined(FIXED_SIZE) && !defined(ROTATING)\n  vec4 pos = prMatrix * mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w;\n  gl_Position = pos + vec4(aOfs*textScale, 0.);\n#endif\n  \n#if defined(IS_SPRITES) && !defined(FIXED_SIZE)\n  vec4 pos = mvMatrix * vec4(aPos, 1.);\n  pos = pos/pos.w + vec4(aOfs,  0.);\n  gl_Position = prMatrix*pos;\n#endif\n  \n#ifdef FAT_LINES\n  /* This code was inspired by Matt Deslauriers' code in \n   https://mattdesl.svbtle.com/drawing-lines-is-hard */\n  vec2 aspectVec = vec2(uAspect, 1.0);\n  mat4 projViewModel = prMatrix * mvMatrix;\n  vec4 currentProjected = projViewModel * vec4(aPos, 1.0);\n  currentProjected = currentProjected/currentProjected.w;\n  vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n  vec2 currentScreen = currentProjected.xy * aspectVec;\n  vec2 nextScreen = (nextProjected.xy / nextProjected.w) * aspectVec;\n  float len = uLwd;\n  vec2 dir = vec2(1.0, 0.0);\n  vPoint = aPoint;\n  vLength = length(nextScreen - currentScreen)/2.0;\n  vLength = vLength/(vLength + len);\n  if (vLength > 0.0) {\n    dir = normalize(nextScreen - currentScreen);\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  dir.x /= uAspect;\n  normal.x /= uAspect;\n  vec4 offset = vec4(len*(normal*aPoint.x*aPoint.y - dir), 0.0, 0.0);\n  gl_Position = currentProjected + offset;\n#endif\n  \n#ifdef IS_BRUSH\n  gl_Position = vec4(aPos, 1.);\n#endif\n}","fragmentShader":"#line 2 2\n// File 2 is the fragment shader\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#endif\nvarying vec4 vCol; // carries alpha\nvarying vec4 vPosition;\n#if defined(HAS_TEXTURE) || defined (IS_TEXT)\nvarying vec2 vTexcoord;\nuniform sampler2D uSampler;\n#endif\n\n#ifdef HAS_FOG\nuniform int uFogMode;\nuniform vec3 uFogColor;\nuniform vec4 uFogParms;\n#endif\n\n#if defined(IS_LIT) && !defined(FIXED_QUADS)\nvarying vec4 vNormal;\n#endif\n\n#if NCLIPPLANES > 0\nuniform vec4 vClipplane[NCLIPPLANES];\n#endif\n\n#if NLIGHTS > 0\nuniform mat4 mvMatrix;\n#endif\n\n#ifdef IS_LIT\nuniform vec3 emission;\nuniform float shininess;\n#if NLIGHTS > 0\nuniform vec3 ambient[NLIGHTS];\nuniform vec3 specular[NLIGHTS]; // light*material\nuniform vec3 diffuse[NLIGHTS];\nuniform vec3 lightDir[NLIGHTS];\nuniform bool viewpoint[NLIGHTS];\nuniform bool finite[NLIGHTS];\n#endif\n#endif // IS_LIT\n\n#ifdef IS_TWOSIDED\nuniform bool front;\nvarying float normz;\n#endif\n\n#ifdef FAT_LINES\nvarying vec2 vPoint;\nvarying float vLength;\n#endif\n\nvoid main(void) {\n  vec4 fragColor;\n#ifdef FAT_LINES\n  vec2 point = vPoint;\n  bool neg = point.y < 0.0;\n  point.y = neg ? (point.y + vLength)/(1.0 - vLength) :\n                 -(point.y - vLength)/(1.0 - vLength);\n#if defined(IS_TRANSPARENT) && defined(IS_LINESTRIP)\n  if (neg && length(point) <= 1.0) discard;\n#endif\n  point.y = min(point.y, 0.0);\n  if (length(point) > 1.0) discard;\n#endif // FAT_LINES\n  \n#ifdef ROUND_POINTS\n  vec2 coord = gl_PointCoord - vec2(0.5);\n  if (length(coord) > 0.5) discard;\n#endif\n  \n#if NCLIPPLANES > 0\n  for (int i = 0; i < NCLIPPLANES; i++)\n    if (dot(vPosition, vClipplane[i]) < 0.0) discard;\n#endif\n    \n#ifdef FIXED_QUADS\n    vec3 n = vec3(0., 0., 1.);\n#elif defined(IS_LIT)\n    vec3 n = normalize(vNormal.xyz);\n#endif\n    \n#ifdef IS_TWOSIDED\n    if ((normz <= 0.) != front) discard;\n#endif\n    \n#ifdef IS_LIT\n    vec3 eye = normalize(-vPosition.xyz/vPosition.w);\n    vec3 lightdir;\n    vec4 colDiff;\n    vec3 halfVec;\n    vec4 lighteffect = vec4(emission, 0.);\n    vec3 col;\n    float nDotL;\n#ifdef FIXED_QUADS\n    n = -faceforward(n, n, eye);\n#endif\n    \n#if NLIGHTS > 0\n    for (int i=0;i<NLIGHTS;i++) {\n      colDiff = vec4(vCol.rgb * diffuse[i], vCol.a);\n      lightdir = lightDir[i];\n      if (!viewpoint[i])\n        lightdir = (mvMatrix * vec4(lightdir, 1.)).xyz;\n      if (!finite[i]) {\n        halfVec = normalize(lightdir + eye);\n      } else {\n        lightdir = normalize(lightdir - vPosition.xyz/vPosition.w);\n        halfVec = normalize(lightdir + eye);\n      }\n      col = ambient[i];\n      nDotL = dot(n, lightdir);\n      col = col + max(nDotL, 0.) * colDiff.rgb;\n      col = col + pow(max(dot(halfVec, n), 0.), shininess) * specular[i];\n      lighteffect = lighteffect + vec4(col, colDiff.a);\n    }\n#endif\n    \n#else // not IS_LIT\n    vec4 colDiff = vCol;\n    vec4 lighteffect = colDiff;\n#endif\n    \n#ifdef IS_TEXT\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef HAS_TEXTURE\n#ifdef TEXTURE_rgb\n    vec4 textureColor = lighteffect*vec4(texture2D(uSampler, vTexcoord).rgb, 1.);\n#endif\n    \n#ifdef TEXTURE_rgba\n    vec4 textureColor = lighteffect*texture2D(uSampler, vTexcoord);\n#endif\n    \n#ifdef TEXTURE_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.), textureColor.rgb)/3.;\n    textureColor =  vec4(lighteffect.rgb, lighteffect.a*luminance);\n#endif\n    \n#ifdef TEXTURE_luminance\n    vec4 textureColor = vec4(lighteffect.rgb*dot(texture2D(uSampler, vTexcoord).rgb, vec3(1.,1.,1.))/3., lighteffect.a);\n#endif\n    \n#ifdef TEXTURE_luminance_alpha\n    vec4 textureColor = texture2D(uSampler, vTexcoord);\n    float luminance = dot(vec3(1.,1.,1.),textureColor.rgb)/3.;\n    textureColor = vec4(lighteffect.rgb*luminance, lighteffect.a*textureColor.a);\n#endif\n    \n    fragColor = textureColor;\n\n#elif defined(IS_TEXT)\n    if (textureColor.a < 0.1)\n      discard;\n    else\n      fragColor = textureColor;\n#else\n    fragColor = lighteffect;\n#endif // HAS_TEXTURE\n    \n#ifdef HAS_FOG\n    // uFogParms elements: x = near, y = far, z = fogscale, w = (1-sin(FOV/2))/(1+sin(FOV/2))\n    // In Exp and Exp2: use density = density/far\n    // fogF will be the proportion of fog\n    // Initialize it to the linear value\n    float fogF;\n    if (uFogMode > 0) {\n      fogF = (uFogParms.y - vPosition.z/vPosition.w)/(uFogParms.y - uFogParms.x);\n      if (uFogMode > 1)\n        fogF = mix(uFogParms.w, 1.0, fogF);\n      fogF = fogF*uFogParms.z;\n      if (uFogMode == 2)\n        fogF = 1.0 - exp(-fogF);\n      // Docs are wrong: use (density*c)^2, not density*c^2\n      // https://gitlab.freedesktop.org/mesa/mesa/-/blob/master/src/mesa/swrast/s_fog.c#L58\n      else if (uFogMode == 3)\n        fogF = 1.0 - exp(-fogF*fogF);\n      fogF = clamp(fogF, 0.0, 1.0);\n      gl_FragColor = vec4(mix(fragColor.rgb, uFogColor, fogF), fragColor.a);\n    } else gl_FragColor = fragColor;\n#else\n    gl_FragColor = fragColor;\n#endif // HAS_FOG\n    \n}","players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script><p>We might like a button on the web page to cause a change to the
display, e.g. a rotation of the plot. First we add buttons, with the
“onclick” event set to a function described below:</p>
<pre><code>&lt;button type="button" onclick="rotate(10)"&gt;Forward&lt;/button&gt;
&lt;button type="button" onclick="rotate(-10)"&gt;Backward&lt;/button&gt;</code></pre>
<p>which produces these buttons:
<button type="button" onclick="rotate(10)">Forward</button>
<button type="button" onclick="rotate(-10)">Backward</button></p>
<p>We stored the subscene number that is currently active in
<code>subid</code> in the code chunk above, and use it as
<code class="r"><code>`r subid`</code></code> in the script below.
<code>knitr</code> substitutes the value when it processes the
document.</p>
<p>The <code>rotate()</code> function uses the Javascript function
<code>document.getElementById</code> to retrieve the
<code>&lt;div&gt;</code> component of the web page containing the scene.
It will have a component named <code>rglinstance</code> which contains
information about the scene that we can modify:</p>
<pre><code>&lt;script type="text/javascript"&gt;
var rotate = function(angle) {
  var rgl = document.getElementById("plot3drgl2").rglinstance;
  rgl.getObj(`r subid`).par3d.userMatrix.rotate(angle, 0,1,0);
  rgl.drawScene();
};
&lt;/script&gt;</code></pre>
<script type="text/javascript">
var rotate = function(angle) {
  var rgl = document.getElementById("plot3drgl2").rglinstance;
  rgl.getObj(7).par3d.userMatrix.rotate(angle, 0,1,0);
  rgl.drawScene();
};
</script><p>If we had used <code>webGL=TRUE</code> in the chunk header, the
<code>knitr</code> WebGL support would create a global object with a
name of the form <code>&lt;chunkname&gt;rgl</code>. For example, if the
code chunk was named <code>plot3d2</code>, the object would be called
<code>plot3d2rgl</code>, and this code would work:</p>
<pre><code>&lt;script type="text/javascript"&gt;
var rotate = function(angle) {
  plot3d2rgl.getObj(`r subid`).par3d.userMatrix.rotate(angle, 0,1,0);
  plot3d2rgl.drawScene();
};
&lt;/script&gt;</code></pre>
</div>
<div class="section level2">
<h2 id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h2>
<p>The following functions are described in this document:<br></p>
<div class="nostripes">
<table class="table"><tbody>
<tr class="odd">
<td align="left">
<a href="#ageControl">ageControl</a>  </td>
<td align="left">
<a href="#getWidgetId">getWidgetId</a>  </td>
<td align="left">
<a href="#propertyControl">propertyControl</a>  </td>
<td align="left">
<a href="#subsetControl">subsetControl</a>  </td>
<td></td>
</tr>
<tr class="even">
<td align="left">
<a href="#asRow">asRow</a>  </td>
<td align="left">
<a href="#par3dinterpControl">par3dinterpControl</a>  </td>
<td align="left">
<a href="#rglMouse">rglMouse</a>  </td>
<td align="left">
<a href="#toggleWidget">toggleWidget</a>  </td>
<td></td>
</tr>
<tr class="odd">
<td align="left">
<a href="#clipplaneControl">clipplaneControl</a>  </td>
<td align="left">
<a href="#playwidget">playwidget</a>  </td>
<td align="left">
<a href="#rglShared">rglShared</a>  </td>
<td align="left">
<a href="#vertexControl">vertexControl</a>  </td>
<td></td>
</tr>
</tbody></table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/dmurdoch" class="external-link">Duncan Murdoch</a>, <a href="http://neoscientists.org/~plex/" class="external-link">Daniel Adler</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
